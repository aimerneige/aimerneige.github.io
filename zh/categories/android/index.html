<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Android | Aimer&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="Aimer Neige">
<link rel="canonical" href="https://aimerneige.com/zh/categories/android/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css" integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://aimerneige.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://aimerneige.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://aimerneige.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://aimerneige.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://aimerneige.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://aimerneige.com/zh/categories/android/index.xml">
<link rel="alternate" hreflang="en" href="https://aimerneige.com/en/categories/android/">
<link rel="alternate" hreflang="zh" href="https://aimerneige.com/zh/categories/android/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Android" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://aimerneige.com/zh/categories/android/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Android"/>
<meta name="twitter:description" content=""/>

</head>

<body class="list" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://aimerneige.com/zh/" accesskey="h" title="Aimer&#39;s Blog (Alt + H)">Aimer&#39;s Blog</a>
            <div class="logo-switches">
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://aimerneige.com/en/" title="English"
                            aria-label="English">English</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://aimerneige.com/zh/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/post/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://aimerneige.com/zh/">主页</a>&nbsp;»&nbsp;<a href="https://aimerneige.com/zh/categories/">分类 🤹‍♂️</a></div>
  <h1>
    Android
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用 DataBinding 精简代码
    </h2>
  </header>
  <div class="entry-content">
    <p>在构建布局的时候，是不是感到要写很多的 findViewById 很浪费时间呢？尤其是布局文件变化的时候，也要在 Activity 中更改很多内容，极大的降低了开发效率，而谷歌在 JetPack 中提供了一种十分有效的方法来精简代码结构，提升开发效率，那就是 DataBinding 下面来介绍 DataBinding 的使用
用到的依赖 implementation &#39;androidx.lifecycle:lifecycle-extensions:2.2.0&#39;
开启 dataBinding 在 app 的 build.gradle 文件中添加以下内容
dataBinding {  enabled true } 位置参考
android {  compileSdkVersion 29  buildToolsVersion &#34;29.0.3&#34;  defaultConfig {  applicationId &#34;com.aimerneige.databindingdemo&#34;  minSdkVersion 24  targetSdkVersion 29  versionCode 1  versionName &#34;1.0&#34;  testInstrumentationRunner &#34;androidx.test.runner.AndroidJUnitRunner&#34;  dataBinding {  enabled true  }  }  buildTypes {  release {  minifyEnabled false  proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize....</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-22 00:43:15 +0800 CST'>二月 22, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to 使用 DataBinding 精简代码" href="https://aimerneige.com/zh/post/android/data-binding/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用 ProgressDialog 实现加载提示
    </h2>
  </header>
  <div class="entry-content">
    <p>在进行一些耗时操作的时候，经常需要加载提示框来提醒用户当前在进行耗时操作，需要等待。
而实现这样一个加载框十分简单。
构建 ProgressDialog 对象 你可以在耗时操作开始前临时建立新的 ProgressDialog 对象，你也同样可以在 Activity 中构建 ProgressDialog 的引用，并在 OnCreate 方法内构建实体，在需要的时候直接显示和隐藏。
其中前者相对灵活，但是使用范围有限，后者使用范围较广，但是可以会使得 OnCreate 中的代码较为繁琐。
但是，不管使用那种方法，ProgressDialog 的构建都是非常简单。
 ProgressDialog progressDialog;  progressDialog = new ProgressDialog(MainActivity.this);  // ProgressDialog progressDialog = new ProgressDialog(MainActivity.this);  progressDialog.setTitle(&#34;This is Title&#34;);  progressDialog.setMessage(&#34;This is Message&#34;);  progressDialog.setCancelable(true); 其他属性可自行探索或者查阅官方文档
显示加载框 在耗时操作开始前(或者任何你想要显示提示框的地方)，通过以下操作显示加载框:
 progressDialog.show(); 关闭提示框 在耗时操作关闭时(或者任何你想要关闭提示框的地方)，通过以下操作关闭加载框:
 progressDialog.hide(); 很简单不是吗又水了一期，不过好像没人看我的博客</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-20 23:40:51 +0800 CST'>二月 20, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to 使用 ProgressDialog 实现加载提示" href="https://aimerneige.com/zh/post/android/progress-dialog/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用 LiveData 优雅地管理布局显示的数据
    </h2>
  </header>
  <div class="entry-content">
    <p>ViewModel 提供了一个可以管理数据的优雅的容器，但是它也只是存储数据而已，并不能对数据进行处理，只是存储数据而已，但是如果使用 LiveData 来辅助， ViewModel 不再只是存储数据，它本身也能处理界面内容，就像它的名字一样，能让数据活起来。
在 ViewModel 中构建 LiveData 对象 与 ViewModel 不同， LiveData 不需要构建类，直接在 ViewModel 中创建对象即可。
首先创建 ViewModel 对象，然后在 ViewModel 对象中创建 LiveData 字段
package com.aimerneige.livedatatest;  import androidx.lifecycle.MutableLiveData; import androidx.lifecycle.ViewModel;  public class ViewModelWithLiveData extends ViewModel {  private MutableLiveData&lt;Integer&gt; LikedNumber; } 然后为 LiveData 对象构建 get 方法
 // May Cause Error  public MutableLiveData&lt;Integer&gt; getLikedNumber() {  return LikedNumber;  } 要注意的是构建的对象如果没有构建的话是为空的，直接返回会有空指针错误，所以要对空指针进行处理。
 在构造方法中解决   // One possible wey to make the LikedNumber not null  ViewModelWithLiveData () {  LikedNumber = new MutableLiveData&lt;&gt;();  LikedNumber....</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-20 22:22:21 +0800 CST'>二月 20, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to 使用 LiveData 优雅地管理布局显示的数据" href="https://aimerneige.com/zh/post/android/live-data/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用 ViewModel 管理布局上的数据
    </h2>
  </header>
  <div class="entry-content">
    <p>如果不进行处理的话，布局上的临时数据可能会因为屏幕反转，切换系统语言等而消失，但是处理过程略微繁琐，较为麻烦，但是谷歌为我们提供了一种更加简洁的方式来管理界面数据，那就是 ViewModel。
构建自己的 ViewModel 类 新建 Java 类，继承至ViewModel，名字自定义，这里以MyViewModel为例。
package com.aimerneige.viewmoudeltest;  import androidx.lifecycle.ViewModel;  public class MyViewMoude extends ViewModel { } 新建好类之后，直接将需要用到的数据填写在内部，可以直接使用 public 的数据类型（不推荐），或者使用 private 数据加 get 方法。
package com.aimerneige.viewmoudletest;  import androidx.lifecycle.ViewModel;  public class MyViewMoude extends ViewModel {  public int number = 0;  public String test = &#34;Test for 100&#34;;   private int age = 0;   public int getAge() {  return age;  }   public void setAge(int age) {  this....</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-20 22:21:25 +0800 CST'>二月 20, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to 使用 ViewModel 管理布局上的数据" href="https://aimerneige.com/zh/post/android/view-module/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>ToolBar
    </h2>
  </header>
  <div class="entry-content">
    <p>MaterialDesign 依赖库  implementation &#39;com.google.android.material:material:1.1.0&#39; 在布局文件中加入 TooBar &lt;androidx.appcompat.widget.Toolbar  android:id=&#34;@&#43;id/toolBar&#34;  android:layout_width=&#34;match_parent&#34;  android:layout_height=&#34;wrap_content&#34;  &lt;!--其他属性设置--&gt;  /&gt;  关于旧版的说明
旧版需要使用兼容包
compile &#39;com.android.support:appcompat-v7:23.1.1&#39;
使用以下布局方法
&lt;android.support.v7.widget.Toolbar  android:id=&#34;@&#43;id/toolbar&#34;  android:layout_width=&#34;wrap_content&#34;  android:layout_height=&#34;wrap_content&#34;&gt;  &lt;TextView  android:layout_width=&#34;match_parent&#34;  android:layout_height=&#34;wrap_content&#34;  android:text=&#34;标题&#34;  android:textSize=&#34;20sp&#34;/&gt;  &lt;/android.support.v7.widget.Toolbar&gt; 很多文章都是这么写的，此处代码也是拷贝的，但是在开发中出了一些问题，博主是没有成功运行，仅供参考，挂了请自行查阅资料，不做解释。这里主要介绍新版 ToolBar 的使用
 在 MainActivity 中引用 Toolbar  Toolbar toolbar = findViewById(R.id.toolBar); 使用 ToolBar 作为界面布局  toolbar.setTitle(&#34;AppBarLayoutTest&#34;);  setSupportActionBar(toolbar);  导包的时候导这个，不要导错了，否则会报错
import androidx.appcompat.widget.Toolbar;
 添加自定义属性 按需添加自定义属性，可以修改的内容包括标题的文字、图标、颜色等。不详细介绍，官方文档里很详细。...</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-18 00:05:23 +0800 CST'>二月 18, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to ToolBar" href="https://aimerneige.com/zh/post/android/toolbar/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用 Gson 解析 Json 数据
    </h2>
  </header>
  <div class="entry-content">
    <p>新建项目 导入 Gson 依赖
 implementation &#39;com.google.code.gson:gson:2.8.5&#39; 设计布局 这里设计俩个 TextView 和一个 Button，点击 Button 后发送 Http 请求获取 Json 数据，并且通过 Gson 进行解析，将解析结果显示在 TextView 上，以此验证解析成功。
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout  xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;  android:layout_width=&#34;match_parent&#34;  android:layout_height=&#34;match_parent&#34;  android:orientation=&#34;vertical&#34;&gt;   &lt;TextView  android:id=&#34;@&#43;id/text1&#34;  android:layout_width=&#34;wrap_content&#34;  android:layout_height=&#34;wrap_content&#34;  android:text=&#34;nodata&#34;/&gt;   &lt;TextView  android:id=&#34;@&#43;id/text2&#34;  android:layout_width=&#34;wrap_content&#34;  android:layout_height=&#34;wrap_content&#34;  android:text=&#34;nodata&#34;/&gt;   &lt;Button  android:id=&#34;@&#43;id/button&#34;  android:layout_width=&#34;match_parent&#34;  android:layout_height=&#34;wrap_content&#34;  android:text=&#34;test&#34;/&gt;  &lt;/LinearLayout&gt; 代码很简单就不多解释了。另外 在 Activity 中注册控件 的内容也省略。...</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-17 00:26:02 +0800 CST'>二月 17, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to 使用 Gson 解析 Json 数据" href="https://aimerneige.com/zh/post/android/gson/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>设置网络图片
    </h2>
  </header>
  <div class="entry-content">
    <p>通过网络连接获取图片信息，并将其设为软件的 ImageView 图片属性
  介绍： 与获取 HTML 类似，首先需要建立网络连接并获取数据，只是这次不通过 String 获取保存数据，而是使用 Bitmap 保存。
与获取 HTML 数据类似，联网操作同样需要新建线程，要注意的是在子线程不能操作 UI，需要通过外部函数设置图片或者在函数返回 Bitmap 对象使用。
 核心代码：  建立网络连接，这里使用 HttpURLConnection  URL url = new URL(&#34;https://www.example.com.img&#34;) HttpURLConnection connection = (HttpURLConnection) url.openConnection(); connection.setRequestMethod(&#34;GET&#34;); // ...... // 诸如超时时间等的设置 处理返回数据  InputStream is = connection.getInputStream(); Bitmap bitmap = BitmapFactory.decodeStream(is); 设置控件，注意该操作不能在子线程中进行  imageView.setImageBitmap(bitmap);  完整代码  代码很烂，有很多可以优化的地方
  //设置网络图片  public void setUrlImage(final int ImageViewId, final String address) {  //开启一个线程用于联网  new Thread(new Runnable() {  @Override  public void run() {  try {  //把传过来的路径转成URL  URL url = new URL(address);  //获取连接  HttpURLConnection connection = (HttpURLConnection) url....</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-16 01:24:30 +0800 CST'>二月 16, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to 设置网络图片" href="https://aimerneige.com/zh/post/android/web-image/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>使用 GsonFormat 插件快速构建 Json 映射对象
    </h2>
  </header>
  <div class="entry-content">
    <p>插件安装  File Settings Plugins Marketplace 在搜索框输入 GsonFormat 搜索 安装相应插件 根据提示重启 IDE  使用方法  新建实体类 ALT &#43; Insert 或者 右键-&gt;Generate 选择 GsonFormat 将待解析 Json 字符串输入弹出的对话框 OK  </p>
  </div>
  <footer class="entry-footer"><span title='2020-02-16 01:21:07 +0800 CST'>二月 16, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to 使用 GsonFormat 插件快速构建 Json 映射对象" href="https://aimerneige.com/zh/post/android/gson-format/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Swiperefreshlayout
    </h2>
  </header>
  <div class="entry-content">
    <p>GoogleDoc
GoogleGithub
声明依赖项 直接复制官方文档，不多解释了（懒
 在应用或模块的 build.gradle 文件中添加所需工件的依赖项：
 dependencies {  implementation &#34;androidx.swiperefreshlayout:swiperefreshlayout:1.0.0&#34;  } 如需详细了解依赖项，请参阅添加编译依赖项。
 添加布局 在 xml 布局文件中添加 SwipeRefreshLayout，并将 WebView 内嵌在 SwipeRefreshLayout 中。
 布局这里拷贝了别人的代码，结果软件闪退，搞了半天找不到原因，重开了一个项目，根据代码提示写了一份居然可以运行，分明代码一样的，好迷啊。。。。。
 &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout  xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;  xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34;  xmlns:tools=&#34;http://schemas.android.com/tools&#34;  android:layout_width=&#34;match_parent&#34;  android:layout_height=&#34;match_parent&#34;  tools:context=&#34;.MainActivity&#34;&gt;   &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout  android:id=&#34;@&#43;id/swipe_refresh&#34;  android:layout_width=&#34;match_parent&#34;  android:layout_height=&#34;match_parent&#34;&gt;   &lt;WebView  android:id=&#34;@&#43;id/web_view&#34;  android:layout_width=&#34;match_parent&#34;  android:layout_height=&#34;match_parent&#34; /&gt;   &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;  &lt;/LinearLayout&gt; SwipeRefreshLayout 类似 ScrollView，内部只能有一个部件，但是你可以这样玩、（手动滑稽...</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-01 01:45:42 +0800 CST'>二月 1, 2020</span>&nbsp;·&nbsp;Aimer Neige</footer>
  <a class="entry-link" aria-label="post link to Swiperefreshlayout" href="https://aimerneige.com/zh/post/android/swiperefreshlayout/"></a>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://aimerneige.com/zh/">Aimer&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
