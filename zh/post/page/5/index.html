<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>æ–‡ç«  ğŸ“ | Aimer's Blog</title><meta name=keywords content><meta name=description content="æ–‡ç«  ğŸ“ - Aimer's Blog"><meta name=author content="Aimer Neige"><link rel=canonical href=https://aimerneige.com/zh/post/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://aimerneige.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aimerneige.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://aimerneige.com/favicon-32x32.png><link rel=apple-touch-icon href=https://aimerneige.com/apple-touch-icon.png><link rel=mask-icon href=https://aimerneige.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://aimerneige.com/zh/post/index.xml title=rss><link rel=alternate hreflang=en href=https://aimerneige.com/en/post/><link rel=alternate hreflang=zh href=https://aimerneige.com/zh/post/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://aimerneige.com/zh/post/"><meta property="og:site_name" content="Aimer's Blog"><meta property="og:title" content="æ–‡ç«  ğŸ“"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="æ–‡ç«  ğŸ“"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ–‡ç«  ğŸ“","item":"https://aimerneige.com/zh/post/"}]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://aimerneige.com/zh/ accesskey=h title="Aimer's Blog (Alt + H)">Aimer's Blog</a><div class=logo-switches><ul class=lang-switch><li>|</li><li><a href=https://aimerneige.com/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://aimerneige.com/zh/about/ title=å…³äº><span>å…³äº</span></a></li><li><a href=https://aimerneige.com/zh/post/ title=æ–‡ç« ><span class=active>æ–‡ç« </span></a></li><li><a href=https://aimerneige.com/zh/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://aimerneige.com/zh/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://aimerneige.com/zh/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://aimerneige.com/zh/search/ title=æœç´¢><span>æœç´¢</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://aimerneige.com/zh/>ä¸»é¡µ</a></div><h1>æ–‡ç«  ğŸ“</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨ DataBinding ç²¾ç®€ä»£ç </h2></header><div class=entry-content><p>åœ¨æ„å»ºå¸ƒå±€çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æ„Ÿåˆ°è¦å†™å¾ˆå¤šçš„ findViewById å¾ˆæµªè´¹æ—¶é—´å‘¢ï¼Ÿå°¤å…¶æ˜¯å¸ƒå±€æ–‡ä»¶å˜åŒ–çš„æ—¶å€™ï¼Œä¹Ÿè¦åœ¨ Activity ä¸­æ›´æ”¹å¾ˆå¤šå†…å®¹ï¼Œæå¤§çš„é™ä½äº†å¼€å‘æ•ˆç‡ï¼Œè€Œè°·æ­Œåœ¨ JetPack ä¸­æä¾›äº†ä¸€ç§ååˆ†æœ‰æ•ˆçš„æ–¹æ³•æ¥ç²¾ç®€ä»£ç ç»“æ„ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œé‚£å°±æ˜¯ DataBinding ä¸‹é¢æ¥ä»‹ç» DataBinding çš„ä½¿ç”¨
ç”¨åˆ°çš„ä¾èµ– implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'
å¼€å¯ dataBinding åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹
dataBinding { enabled true } ä½ç½®å‚è€ƒ
android { compileSdkVersion 29 buildToolsVersion "29.0.3" defaultConfig { applicationId "com.aimerneige.databindingdemo" minSdkVersion 24 targetSdkVersion 29 versionCode 1 versionName "1.0" testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner" dataBinding { enabled true } } buildTypes { release { minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro' } } } ä¸ºå¸ƒå±€æ–‡ä»¶æä¾› dataBinding æ”¯æŒ åœ¨å¸ƒå±€æ–‡ä»¶å¼€å¤´ç‚¹å‡»é»„è‰²ç¯æ³¡ï¼ˆæˆ–æŒ‰ALT + Enterï¼‰ï¼Œé€‰æ‹©ä»¥ä¸‹æ“ä½œå°†å¸ƒå±€æ–‡ä»¶è½¬æ¢ä¸º data binding layout ï¼Œè·å– data binding æ”¯æŒ
...</p></div><footer class=entry-footer><span title='2020-02-22 00:43:15 +0800 +0800'>2020å¹´2æœˆ22æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨ DataBinding ç²¾ç®€ä»£ç " href=https://aimerneige.com/zh/post/android/data-binding/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨ ProgressDialog å®ç°åŠ è½½æç¤º</h2></header><div class=entry-content><p>åœ¨è¿›è¡Œä¸€äº›è€—æ—¶æ“ä½œçš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦åŠ è½½æç¤ºæ¡†æ¥æé†’ç”¨æˆ·å½“å‰åœ¨è¿›è¡Œè€—æ—¶æ“ä½œï¼Œéœ€è¦ç­‰å¾…ã€‚
è€Œå®ç°è¿™æ ·ä¸€ä¸ªåŠ è½½æ¡†ååˆ†ç®€å•ã€‚
æ„å»º ProgressDialog å¯¹è±¡ ä½ å¯ä»¥åœ¨è€—æ—¶æ“ä½œå¼€å§‹å‰ä¸´æ—¶å»ºç«‹æ–°çš„ ProgressDialog å¯¹è±¡ï¼Œä½ ä¹ŸåŒæ ·å¯ä»¥åœ¨ Activity ä¸­æ„å»º ProgressDialog çš„å¼•ç”¨ï¼Œå¹¶åœ¨ OnCreate æ–¹æ³•å†…æ„å»ºå®ä½“ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ç›´æ¥æ˜¾ç¤ºå’Œéšè—ã€‚
å…¶ä¸­å‰è€…ç›¸å¯¹çµæ´»ï¼Œä½†æ˜¯ä½¿ç”¨èŒƒå›´æœ‰é™ï¼Œåè€…ä½¿ç”¨èŒƒå›´è¾ƒå¹¿ï¼Œä½†æ˜¯å¯ä»¥ä¼šä½¿å¾— OnCreate ä¸­çš„ä»£ç è¾ƒä¸ºç¹çã€‚
ä½†æ˜¯ï¼Œä¸ç®¡ä½¿ç”¨é‚£ç§æ–¹æ³•ï¼ŒProgressDialog çš„æ„å»ºéƒ½æ˜¯éå¸¸ç®€å•ã€‚
ProgressDialog progressDialog; progressDialog = new ProgressDialog(MainActivity.this); // ProgressDialog progressDialog = new ProgressDialog(MainActivity.this); progressDialog.setTitle("This is Title"); progressDialog.setMessage("This is Message"); progressDialog.setCancelable(true); å…¶ä»–å±æ€§å¯è‡ªè¡Œæ¢ç´¢æˆ–è€…æŸ¥é˜…å®˜æ–¹æ–‡æ¡£
æ˜¾ç¤ºåŠ è½½æ¡† åœ¨è€—æ—¶æ“ä½œå¼€å§‹å‰(æˆ–è€…ä»»ä½•ä½ æƒ³è¦æ˜¾ç¤ºæç¤ºæ¡†çš„åœ°æ–¹)ï¼Œé€šè¿‡ä»¥ä¸‹æ“ä½œæ˜¾ç¤ºåŠ è½½æ¡†:
progressDialog.show(); å…³é—­æç¤ºæ¡† åœ¨è€—æ—¶æ“ä½œå…³é—­æ—¶(æˆ–è€…ä»»ä½•ä½ æƒ³è¦å…³é—­æç¤ºæ¡†çš„åœ°æ–¹)ï¼Œé€šè¿‡ä»¥ä¸‹æ“ä½œå…³é—­åŠ è½½æ¡†:
progressDialog.hide(); å¾ˆç®€å•ä¸æ˜¯å—
åˆæ°´äº†ä¸€æœŸï¼Œä¸è¿‡å¥½åƒæ²¡äººçœ‹æˆ‘çš„åšå®¢</p></div><footer class=entry-footer><span title='2020-02-20 23:40:51 +0800 +0800'>2020å¹´2æœˆ20æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨ ProgressDialog å®ç°åŠ è½½æç¤º" href=https://aimerneige.com/zh/post/android/progress-dialog/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨ LiveData ä¼˜é›…åœ°ç®¡ç†å¸ƒå±€æ˜¾ç¤ºçš„æ•°æ®</h2></header><div class=entry-content><p>ViewModel æä¾›äº†ä¸€ä¸ªå¯ä»¥ç®¡ç†æ•°æ®çš„ä¼˜é›…çš„å®¹å™¨ï¼Œä½†æ˜¯å®ƒä¹Ÿåªæ˜¯å­˜å‚¨æ•°æ®è€Œå·²ï¼Œå¹¶ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œåªæ˜¯å­˜å‚¨æ•°æ®è€Œå·²ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ LiveData æ¥è¾…åŠ©ï¼Œ ViewModel ä¸å†åªæ˜¯å­˜å‚¨æ•°æ®ï¼Œå®ƒæœ¬èº«ä¹Ÿèƒ½å¤„ç†ç•Œé¢å†…å®¹ï¼Œå°±åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œèƒ½è®©æ•°æ®æ´»èµ·æ¥ã€‚
åœ¨ ViewModel ä¸­æ„å»º LiveData å¯¹è±¡ ä¸ ViewModel ä¸åŒï¼Œ LiveData ä¸éœ€è¦æ„å»ºç±»ï¼Œç›´æ¥åœ¨ ViewModel ä¸­åˆ›å»ºå¯¹è±¡å³å¯ã€‚
é¦–å…ˆåˆ›å»º ViewModel å¯¹è±¡ï¼Œç„¶ååœ¨ ViewModel å¯¹è±¡ä¸­åˆ›å»º LiveData å­—æ®µ
package com.aimerneige.livedatatest; import androidx.lifecycle.MutableLiveData; import androidx.lifecycle.ViewModel; public class ViewModelWithLiveData extends ViewModel { private MutableLiveData&lt;Integer> LikedNumber; } ç„¶åä¸º LiveData å¯¹è±¡æ„å»º get æ–¹æ³•
// May Cause Error public MutableLiveData&lt;Integer> getLikedNumber() { return LikedNumber; } è¦æ³¨æ„çš„æ˜¯æ„å»ºçš„å¯¹è±¡å¦‚æœæ²¡æœ‰æ„å»ºçš„è¯æ˜¯ä¸ºç©ºçš„ï¼Œç›´æ¥è¿”å›ä¼šæœ‰ç©ºæŒ‡é’ˆé”™è¯¯ï¼Œæ‰€ä»¥è¦å¯¹ç©ºæŒ‡é’ˆè¿›è¡Œå¤„ç†ã€‚
åœ¨æ„é€ æ–¹æ³•ä¸­è§£å†³ // One possible wey to make the LikedNumber not null ViewModelWithLiveData () { LikedNumber = new MutableLiveData&lt;>(); LikedNumber.setValue(0); } åœ¨ get æ–¹æ³•ä¸­è§£å†³(æ¨è) public MutableLiveData&lt;Integer> getLikedNumber() { if (LikedNumber == null) { LikedNumber = new MutableLiveData&lt;>(); LikedNumber.setValue(0); } return LikedNumber; } æ¥ä¸‹æ¥ä¸ºæ•°æ®æä¾›æ“ä½œæ–¹æ³•ï¼Œè¦æ³¨æ„çš„æ˜¯è¿™é‡Œéå¸¸ä¸å»ºè®®ç›´æ¥æä¾› set æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚è¿™é‡Œä»¥å¢åŠ ï¼ˆå‡å°‘ï¼‰æ•°æ®å¤§å°ä¸ºä¾‹ï¼š
...</p></div><footer class=entry-footer><span title='2020-02-20 22:22:21 +0800 +0800'>2020å¹´2æœˆ20æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨ LiveData ä¼˜é›…åœ°ç®¡ç†å¸ƒå±€æ˜¾ç¤ºçš„æ•°æ®" href=https://aimerneige.com/zh/post/android/live-data/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨ ViewModel ç®¡ç†å¸ƒå±€ä¸Šçš„æ•°æ®</h2></header><div class=entry-content><p>å¦‚æœä¸è¿›è¡Œå¤„ç†çš„è¯ï¼Œå¸ƒå±€ä¸Šçš„ä¸´æ—¶æ•°æ®å¯èƒ½ä¼šå› ä¸ºå±å¹•åè½¬ï¼Œåˆ‡æ¢ç³»ç»Ÿè¯­è¨€ç­‰è€Œæ¶ˆå¤±ï¼Œä½†æ˜¯å¤„ç†è¿‡ç¨‹ç•¥å¾®ç¹çï¼Œè¾ƒä¸ºéº»çƒ¦ï¼Œä½†æ˜¯è°·æ­Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´åŠ ç®€æ´çš„æ–¹å¼æ¥ç®¡ç†ç•Œé¢æ•°æ®ï¼Œé‚£å°±æ˜¯ ViewModelã€‚
æ„å»ºè‡ªå·±çš„ ViewModel ç±» æ–°å»º Java ç±»ï¼Œç»§æ‰¿è‡³ViewModelï¼Œåå­—è‡ªå®šä¹‰ï¼Œè¿™é‡Œä»¥MyViewModelä¸ºä¾‹ã€‚
package com.aimerneige.viewmoudeltest; import androidx.lifecycle.ViewModel; public class MyViewMoude extends ViewModel { } æ–°å»ºå¥½ç±»ä¹‹åï¼Œç›´æ¥å°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å¡«å†™åœ¨å†…éƒ¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ public çš„æ•°æ®ç±»å‹ï¼ˆä¸æ¨èï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ private æ•°æ®åŠ  get æ–¹æ³•ã€‚
package com.aimerneige.viewmoudletest; import androidx.lifecycle.ViewModel; public class MyViewMoude extends ViewModel { public int number = 0; public String test = "Test for 100"; private int age = 0; public int getAge() { return age; } public void setAge(int age) { this.age = age; } } ç„¶åæŠŠViewModelå½“æˆä¸€ä¸ªæ™ºèƒ½åœ°å­˜å‚¨æ•°æ®çš„ç»“æ„ä½“ä½¿ç”¨å³å¯ã€‚
åœ¨ Activity ä¸­ä½¿ç”¨ ViewModel åœ¨MainActivityå†…æ„å»ºMyViewMoudeçš„å¼•ç”¨
MyViewMoude myViewMoude; åœ¨ onCreate æ–¹æ³•å†…è·å¾— MyViewMoude çš„å®ä½“
...</p></div><footer class=entry-footer><span title='2020-02-20 22:21:25 +0800 +0800'>2020å¹´2æœˆ20æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨ ViewModel ç®¡ç†å¸ƒå±€ä¸Šçš„æ•°æ®" href=https://aimerneige.com/zh/post/android/view-module/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ToolBar</h2></header><div class=entry-content><p>MaterialDesign ä¾èµ–åº“ implementation 'com.google.android.material:material:1.1.0' åœ¨å¸ƒå±€æ–‡ä»¶ä¸­åŠ å…¥ TooBar &lt;androidx.appcompat.widget.Toolbar android:id="@+id/toolBar" android:layout_width="match_parent" android:layout_height="wrap_content" &lt;!--å…¶ä»–å±æ€§è®¾ç½®--> /> å…³äºæ—§ç‰ˆçš„è¯´æ˜
æ—§ç‰ˆéœ€è¦ä½¿ç”¨å…¼å®¹åŒ…
compile 'com.android.support:appcompat-v7:23.1.1'
ä½¿ç”¨ä»¥ä¸‹å¸ƒå±€æ–¹æ³•
&lt;android.support.v7.widget.Toolbar android:id="@+id/toolbar" android:layout_width="wrap_content" android:layout_height="wrap_content"> &lt;TextView android:layout_width="match_parent" android:layout_height="wrap_content" android:text="æ ‡é¢˜" android:textSize="20sp"/> &lt;/android.support.v7.widget.Toolbar> å¾ˆå¤šæ–‡ç« éƒ½æ˜¯è¿™ä¹ˆå†™çš„ï¼Œæ­¤å¤„ä»£ç ä¹Ÿæ˜¯æ‹·è´çš„ï¼Œä½†æ˜¯åœ¨å¼€å‘ä¸­å‡ºäº†ä¸€äº›é—®é¢˜ï¼Œåšä¸»æ˜¯æ²¡æœ‰æˆåŠŸè¿è¡Œï¼Œä»…ä¾›å‚è€ƒï¼ŒæŒ‚äº†è¯·è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ï¼Œä¸åšè§£é‡Šã€‚è¿™é‡Œä¸»è¦ä»‹ç»æ–°ç‰ˆ ToolBar çš„ä½¿ç”¨
åœ¨ MainActivity ä¸­å¼•ç”¨ Toolbar Toolbar toolbar = findViewById(R.id.toolBar); ä½¿ç”¨ ToolBar ä½œä¸ºç•Œé¢å¸ƒå±€ toolbar.setTitle("AppBarLayoutTest"); setSupportActionBar(toolbar); å¯¼åŒ…çš„æ—¶å€™å¯¼è¿™ä¸ªï¼Œä¸è¦å¯¼é”™äº†ï¼Œå¦åˆ™ä¼šæŠ¥é”™
import androidx.appcompat.widget.Toolbar;
æ·»åŠ è‡ªå®šä¹‰å±æ€§ æŒ‰éœ€æ·»åŠ è‡ªå®šä¹‰å±æ€§ï¼Œå¯ä»¥ä¿®æ”¹çš„å†…å®¹åŒ…æ‹¬æ ‡é¢˜çš„æ–‡å­—ã€å›¾æ ‡ã€é¢œè‰²ç­‰ã€‚ä¸è¯¦ç»†ä»‹ç»ï¼Œå®˜æ–¹æ–‡æ¡£é‡Œå¾ˆè¯¦ç»†ã€‚
å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.android.com/reference/android/widget/Toolbar
æ·»åŠ èœå• æ„å»ºèœå•çš„å¸ƒå±€æ–‡ä»¶ è¿™é‡Œæ·»åŠ çš„ item ä¼šæŒ‰é¡ºåºæ˜¾ç¤ºåœ¨ ToolBar ä¸Šé¢ã€‚
showAsAction å±æ€§ï¼š
always:æ€»æ˜¯æ˜¾ç¤º ifRoom:ç©ºé—´è¶³å¤Ÿæ—¶æ˜¾ç¤º never:æ°¸ä¸æ˜¾ç¤ºï¼ˆæ”¶çº³åœ¨å³ä¾§çš„ä¸‰æ¡æ¨ªçº¿é‚£ä¸ªæ›´å¤šæŒ‰é’®é‡Œï¼‰ &lt;?xml version="1.0" encoding="utf-8"?> &lt;menu xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto"> &lt;item android:id="@+id/toolbar_setting" android:icon="@drawable/ic_setting" android:title="@string/toolbar_setting" app:showAsAction="always" /> &lt;item android:id="@+id/toolbar_about" android:title="@string/toolbar_about" app:showAsAction="never" /> &lt;item android:id="@+id/toolbar_exit" android:title="@string/toolbar_exit" app:showAsAction="never" /> &lt;/menu> åœ¨ä¸»èœå•ä¸­å¼•ç”¨èœå•çš„å¸ƒå±€æ–‡ä»¶ @Override public boolean onCreateOptionsMenu(Menu menu) { getMenuInflater().inflate(R.menu.toolbar, menu); return true; } è®¾ç½®èœå•ç‚¹å‡»äº‹ä»¶ @Override public boolean onOptionsItemSelected(@NonNull MenuItem item) { switch (item.getItemId()) { case android.R.id.home: drawerLayout.openDrawer(GravityCompat.START); break; case R.id.toolbar_setting: Toast.makeText(MainActivity.this, "Waiting for coding for setting", Toast.LENGTH_SHORT).show(); break; case R.id.toolbar_about: Toast.makeText(MainActivity.this, "Waiting for coding for about", Toast.LENGTH_SHORT).show(); break; case R.id.toolbar_exit: Toast.makeText(MainActivity.this, "Waiting for coding for exit", Toast.LENGTH_SHORT).show(); break; default: break; } return true; } AppBarLayout ä½¿ç”¨ AppBarLayout å¯ä»¥ç»™ ToolBar å®šä¹‰æ›´å¤šçš„å†…å®¹ï¼Œå¹¶ä¸” TabLayout ä¸€èˆ¬ä¹Ÿæ˜¯åµŒå¥—åœ¨å…¶å†…éƒ¨ã€‚
...</p></div><footer class=entry-footer><span title='2020-02-18 00:05:23 +0800 +0800'>2020å¹´2æœˆ18æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to ToolBar" href=https://aimerneige.com/zh/post/android/toolbar/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨ Gson è§£æ Json æ•°æ®</h2></header><div class=entry-content><p>æ–°å»ºé¡¹ç›® å¯¼å…¥ Gson ä¾èµ–
implementation 'com.google.code.gson:gson:2.8.5' è®¾è®¡å¸ƒå±€ è¿™é‡Œè®¾è®¡ä¿©ä¸ª TextView å’Œä¸€ä¸ª Buttonï¼Œç‚¹å‡» Button åå‘é€ Http è¯·æ±‚è·å– Json æ•°æ®ï¼Œå¹¶ä¸”é€šè¿‡ Gson è¿›è¡Œè§£æï¼Œå°†è§£æç»“æœæ˜¾ç¤ºåœ¨ TextView ä¸Šï¼Œä»¥æ­¤éªŒè¯è§£ææˆåŠŸã€‚
&lt;?xml version="1.0" encoding="utf-8"?> &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical"> &lt;TextView android:id="@+id/text1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="nodata"/> &lt;TextView android:id="@+id/text2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="nodata"/> &lt;Button android:id="@+id/button" android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test"/> &lt;/LinearLayout> ä»£ç å¾ˆç®€å•å°±ä¸å¤šè§£é‡Šäº†ã€‚å¦å¤– åœ¨ Activity ä¸­æ³¨å†Œæ§ä»¶ çš„å†…å®¹ä¹Ÿçœç•¥ã€‚
å‘é€ Http è¯·æ±‚å¹¶è·å–æ•°æ® æ“ä½œåŒä¸€èˆ¬çš„ HTML æºç è·å–ï¼Œè¿™é‡Œä¸å¤šè§£é‡Šã€‚ç”±äºä¿å­˜åœ¨ç½‘ç»œä¸Šçš„ Json æ•°æ®å…¶æºç å°±æ˜¯åˆæ³•çš„ Json å­—ç¬¦ä¸²ï¼Œå› æ­¤é€šè¿‡è§£æç½‘é¡µæºç çš„æ–¹æ³•è·å–çš„å†…å®¹å°±æ˜¯ Json æ•°æ®ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç½‘é¡µä¿å­˜äº† Json æ•°æ®ï¼Œå¯ç”¨äºæµ‹è¯•ã€‚
https://user.moecraft.net:8443/API/Mc/authlib/ è·å–æºç ä¹‹åå°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²å†…å³å¯ç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚æ­¤å¤„å‘½åä¸º jsonDataã€‚
...</p></div><footer class=entry-footer><span title='2020-02-17 00:26:02 +0800 +0800'>2020å¹´2æœˆ17æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨ Gson è§£æ Json æ•°æ®" href=https://aimerneige.com/zh/post/android/gson/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Ubuntu 19.10 é…ç½® Kotlin å¼€å‘ç¯å¢ƒ</h2></header><div class=entry-content><p>Ubuntu 19.10 é…ç½® Kotlin å¼€å‘ç¯å¢ƒ ä½¿ç”¨å·¥å…· VSCode
å®‰è£… Kotlin ç¼–è¯‘å™¨ sudo snap install kotlin --classic å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
sudo apt install snap è¿™æ¡æŒ‡ä»¤æ‰§è¡Œåï¼Œç³»ç»Ÿå®‰è£…çš„å†…å®¹æœ‰ï¼š
kotlinc kotlinc-jvm kotlinc-js kotlin-dce-js å¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰è¾“å‡ºè¯æ˜å®‰è£…æˆåŠŸã€‚
ä¿©æ¡æŒ‡ä»¤éƒ½å¯ä»¥ï¼Œå»ºè®®ä½¿ç”¨ä¸Šé¢çš„ã€‚
kotlin -version kotlinc -version å®‰è£…æ’ä»¶ è¿™ä¿©ä¸ªè²Œä¼¼å®‰è£…ä¸€ä¸ªå°±å¯ä»¥äº†ï¼Œä¹Ÿå¯ä»¥éƒ½å®‰è£…ã€‚
Kotlin Kotlin Language å®‰è£…ä¸‹é¢è¿™ä¸ªæ’ä»¶ååœ¨ æ–‡ä»¶ -> é¦–é€‰é¡¹ -> è®¾ç½® -> æ‰©å±• -> Run Code Configuration ä¸­æ‰¾åˆ°å¹¶å‹¾é€‰ Run In Terminal
Code Runner æµ‹è¯• å»ºç«‹æ–°æ–‡ä»¶ HelloWorld.kt fun main(args: Array&lt;String>) { println("Hello, World!") } é€šè¿‡ç‚¹å‡»å³ä¸Šè§’ä¸‰è§’å½¢ï¼ˆç”± Code Runner æä¾›çš„å¿«æ·æ–¹å¼ï¼‰æ¥ç¼–è¯‘è¿è¡Œï¼ŒæŸ¥çœ‹è¾“å‡ºã€‚
å¦‚æœçœ‹åˆ°ç»ˆç«¯è¾“å‡º Hello, World! çš„å†…å®¹ï¼Œè¯´æ˜å¼€å‘ç¯å¢ƒæ­å»ºæˆåŠŸã€‚
...</p></div><footer class=entry-footer><span title='2020-02-16 01:25:45 +0800 +0800'>2020å¹´2æœˆ16æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to Ubuntu 19.10 é…ç½® Kotlin å¼€å‘ç¯å¢ƒ" href=https://aimerneige.com/zh/post/linux/kotlin-on-ubuntu-19-10/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>è®¾ç½®ç½‘ç»œå›¾ç‰‡</h2></header><div class=entry-content><p>é€šè¿‡ç½‘ç»œè¿æ¥è·å–å›¾ç‰‡ä¿¡æ¯ï¼Œå¹¶å°†å…¶è®¾ä¸ºè½¯ä»¶çš„ ImageView å›¾ç‰‡å±æ€§
ä»‹ç»ï¼š ä¸è·å– HTML ç±»ä¼¼ï¼Œé¦–å…ˆéœ€è¦å»ºç«‹ç½‘ç»œè¿æ¥å¹¶è·å–æ•°æ®ï¼Œåªæ˜¯è¿™æ¬¡ä¸é€šè¿‡ String è·å–ä¿å­˜æ•°æ®ï¼Œè€Œæ˜¯ä½¿ç”¨ Bitmap ä¿å­˜ã€‚
ä¸è·å– HTML æ•°æ®ç±»ä¼¼ï¼Œè”ç½‘æ“ä½œåŒæ ·éœ€è¦æ–°å»ºçº¿ç¨‹ï¼Œè¦æ³¨æ„çš„æ˜¯åœ¨å­çº¿ç¨‹ä¸èƒ½æ“ä½œ UIï¼Œéœ€è¦é€šè¿‡å¤–éƒ¨å‡½æ•°è®¾ç½®å›¾ç‰‡æˆ–è€…åœ¨å‡½æ•°è¿”å› Bitmap å¯¹è±¡ä½¿ç”¨ã€‚
æ ¸å¿ƒä»£ç ï¼š å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œè¿™é‡Œä½¿ç”¨ HttpURLConnection URL url = new URL("https://www.example.com.img") HttpURLConnection connection = (HttpURLConnection) url.openConnection(); connection.setRequestMethod("GET"); // ...... // è¯¸å¦‚è¶…æ—¶æ—¶é—´ç­‰çš„è®¾ç½® å¤„ç†è¿”å›æ•°æ® InputStream is = connection.getInputStream(); Bitmap bitmap = BitmapFactory.decodeStream(is); è®¾ç½®æ§ä»¶ï¼Œæ³¨æ„è¯¥æ“ä½œä¸èƒ½åœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œ imageView.setImageBitmap(bitmap); å®Œæ•´ä»£ç  ä»£ç å¾ˆçƒ‚ï¼Œæœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹
//è®¾ç½®ç½‘ç»œå›¾ç‰‡ public void setUrlImage(final int ImageViewId, final String address) { //å¼€å¯ä¸€ä¸ªçº¿ç¨‹ç”¨äºè”ç½‘ new Thread(new Runnable() { @Override public void run() { try { //æŠŠä¼ è¿‡æ¥çš„è·¯å¾„è½¬æˆURL URL url = new URL(address); //è·å–è¿æ¥ HttpURLConnection connection = (HttpURLConnection) url.openConnection(); //ä½¿ç”¨GETæ–¹æ³•è®¿é—®ç½‘ç»œ connection.setRequestMethod("GET"); //è¶…æ—¶æ—¶é—´ä¸º10ç§’ connection.setConnectTimeout(10000); //è·å–è¿”å›ç  int code = connection.getResponseCode(); if (code == 200) { InputStream inputStream = connection.getInputStream(); //ä½¿ç”¨å·¥å‚æŠŠç½‘ç»œçš„è¾“å…¥æµç”Ÿäº§Bitmap Bitmap bitmap = BitmapFactory.decodeStream(inputStream); //å­çº¿ç¨‹ä¸èƒ½æ“ä½œUIï¼Œé€šè¿‡å¤–éƒ¨å‡½æ•°è®¾ç½®å›¾ç‰‡ setImage(ImageViewId, bitmap); inputStream.close(); } else { //æœåŠ¡å¯å‘ç”Ÿé”™è¯¯ï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯ Toast.makeText(HttpImage.this, "Can't get the image from Internet.", Toast.LENGTH_SHORT).show(); } } catch (Exception e) { e.printStackTrace(); } } }).start(); } public void setImage(int ImageViewId, Bitmap bitmap) { ImageView imageView = findViewById(ImageViewId); imageView.setImageBitmap(bitmap); } ä¸€äº›åºŸè¯ å®é™…ä¸Šå’Œå¤„ç† HTML æ˜¯ç±»ä¼¼çš„ï¼Œåªä¸è¿‡ä¸å†ä½¿ç”¨ String å¤„ç†æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p></div><footer class=entry-footer><span title='2020-02-16 01:24:30 +0800 +0800'>2020å¹´2æœˆ16æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to è®¾ç½®ç½‘ç»œå›¾ç‰‡" href=https://aimerneige.com/zh/post/android/web-image/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨ GsonFormat æ’ä»¶å¿«é€Ÿæ„å»º Json æ˜ å°„å¯¹è±¡</h2></header><div class=entry-content><p>æ’ä»¶å®‰è£… File Settings Plugins Marketplace åœ¨æœç´¢æ¡†è¾“å…¥ GsonFormat æœç´¢ å®‰è£…ç›¸åº”æ’ä»¶ æ ¹æ®æç¤ºé‡å¯ IDE ä½¿ç”¨æ–¹æ³• æ–°å»ºå®ä½“ç±» ALT + Insert æˆ–è€… å³é”®->Generate é€‰æ‹© GsonFormat å°†å¾…è§£æ Json å­—ç¬¦ä¸²è¾“å…¥å¼¹å‡ºçš„å¯¹è¯æ¡† OK</p></div><footer class=entry-footer><span title='2020-02-16 01:21:07 +0800 +0800'>2020å¹´2æœˆ16æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨ GsonFormat æ’ä»¶å¿«é€Ÿæ„å»º Json æ˜ å°„å¯¹è±¡" href=https://aimerneige.com/zh/post/android/gson-format/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Swiperefreshlayout</h2></header><div class=entry-content><p>GoogleDoc
GoogleGithub
å£°æ˜ä¾èµ–é¡¹ ç›´æ¥å¤åˆ¶å®˜æ–¹æ–‡æ¡£ï¼Œä¸å¤šè§£é‡Šäº†ï¼ˆæ‡’
åœ¨åº”ç”¨æˆ–æ¨¡å—çš„ build.gradle æ–‡ä»¶ä¸­æ·»åŠ æ‰€éœ€å·¥ä»¶çš„ä¾èµ–é¡¹ï¼š
dependencies { implementation "androidx.swiperefreshlayout:swiperefreshlayout:1.0.0" } å¦‚éœ€è¯¦ç»†äº†è§£ä¾èµ–é¡¹ï¼Œè¯·å‚é˜…æ·»åŠ ç¼–è¯‘ä¾èµ–é¡¹ã€‚
æ·»åŠ å¸ƒå±€ åœ¨ xml å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ  SwipeRefreshLayoutï¼Œå¹¶å°† WebView å†…åµŒåœ¨ SwipeRefreshLayout ä¸­ã€‚
å¸ƒå±€è¿™é‡Œæ‹·è´äº†åˆ«äººçš„ä»£ç ï¼Œç»“æœè½¯ä»¶é—ªé€€ï¼Œæäº†åŠå¤©æ‰¾ä¸åˆ°åŸå› ï¼Œé‡å¼€äº†ä¸€ä¸ªé¡¹ç›®ï¼Œæ ¹æ®ä»£ç æç¤ºå†™äº†ä¸€ä»½å±…ç„¶å¯ä»¥è¿è¡Œï¼Œåˆ†æ˜ä»£ç ä¸€æ ·çš„ï¼Œå¥½è¿·å•Šã€‚ã€‚ã€‚ã€‚ã€‚
&lt;?xml version="1.0" encoding="utf-8"?> &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" tools:context=".MainActivity"> &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout android:id="@+id/swipe_refresh" android:layout_width="match_parent" android:layout_height="match_parent"> &lt;WebView android:id="@+id/web_view" android:layout_width="match_parent" android:layout_height="match_parent" /> &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout> &lt;/LinearLayout> SwipeRefreshLayout ç±»ä¼¼ ScrollViewï¼Œå†…éƒ¨åªèƒ½æœ‰ä¸€ä¸ªéƒ¨ä»¶ï¼Œä½†æ˜¯ä½ å¯ä»¥è¿™æ ·ç©ã€ï¼ˆæ‰‹åŠ¨æ»‘ç¨½
&lt;?xml version="1.0" encoding="utf-8"?> &lt;ScrollView xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent"> &lt;LinearLayout android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical"> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;Button android:layout_width="match_parent" android:layout_height="wrap_content" android:text="test_scroll" android:textSize="16sp" /> &lt;/LinearLayout> &lt;/ScrollView> ç¼–å†™ä»£ç éƒ¨åˆ† å…ˆæ”¾ä¸€ä¸ªå®Œæ•´çš„æºç ï¼Œçœ‹ä¸æ‡‚ç›´æ¥è·³è¿‡ï¼Œä¸‹é¢ä»‹ç»å…³äº Swiperefreshlayout çš„æ ¸å¿ƒä»£ç 
...</p></div><footer class=entry-footer><span title='2020-02-01 01:45:42 +0800 +0800'>2020å¹´2æœˆ1æ—¥</span>&nbsp;Â·&nbsp;<span>Aimer Neige</span></footer><a class=entry-link aria-label="post link to Swiperefreshlayout" href=https://aimerneige.com/zh/post/android/swiperefreshlayout/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://aimerneige.com/zh/post/page/4/>Â«&nbsp;ä¸Šä¸€é¡µ&nbsp;
</a><a class=next href=https://aimerneige.com/zh/post/page/6/>ä¸‹ä¸€é¡µ&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://aimerneige.com/zh/>Aimer's Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>