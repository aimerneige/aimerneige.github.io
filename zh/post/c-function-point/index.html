<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>C å‡½æ•°æŒ‡é’ˆ | AimerNeige&#39;s Blog</title>
<meta name="keywords" content="C/C&#43;&#43;, Teach" />
<meta name="description" content="å‡½æ•°æŒ‡é’ˆç”¨æ³•">
<meta name="author" content="Aimer Neige">
<link rel="canonical" href="https://aimerneige.com/zh/post/c-function-point/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.6cba0d81b5f3f42bb578d49f402ba4175aa72b43def148780b8ad714c957c6f5.css" integrity="sha256-bLoNgbXz9Cu1eNSfQCukF1qnK0Pe8Uh4C4rXFMlXxvU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.09c108e3264e89b014be5846c6d4400805855e88ac39bf8d749068428ba25760.js" integrity="sha256-CcEI4yZOibAUvlhGxtRACAWFXoisOb&#43;NdJBoQouiV2A="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://aimerneige.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://aimerneige.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://aimerneige.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://aimerneige.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://aimerneige.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.80.0" />
<link rel="alternate" hreflang="zh" href="https://aimerneige.com/zh/post/c-function-point/" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-5QJPQTJ618', 'auto');
	
	ga('send', 'pageview');
}
</script>
<meta property="og:title" content="C å‡½æ•°æŒ‡é’ˆ" />
<meta property="og:description" content="å‡½æ•°æŒ‡é’ˆç”¨æ³•" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://aimerneige.com/zh/post/c-function-point/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-11-04T21:00:39&#43;08:00" />
<meta property="article:modified_time" content="2020-11-04T21:00:39&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="C å‡½æ•°æŒ‡é’ˆ"/>
<meta name="twitter:description" content="å‡½æ•°æŒ‡é’ˆç”¨æ³•"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "æ–‡ç«  ğŸ“",
      "item": "https://aimerneige.com/zh/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "C å‡½æ•°æŒ‡é’ˆ",
      "item": "https://aimerneige.com/zh/post/c-function-point/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "C å‡½æ•°æŒ‡é’ˆ",
  "name": "C å‡½æ•°æŒ‡é’ˆ",
  "description": "å‡½æ•°æŒ‡é’ˆç”¨æ³•",
  "keywords": [
    "C/C++", "Teach"
  ],
  "articleBody": "å‡½æ•°æŒ‡é’ˆåœ¨å¤§å‹çš„ C è¯­è¨€é¡¹ç›®ä¸­ååˆ†é‡è¦ï¼Œä½†æ˜¯å­¦æ ¡å¯¹å®ƒçš„ä»‹ç»ä¸€å¸¦è€Œè¿‡ï¼Œå›½å†…ä¸€äº›ä»‹ç»å‡½æ•°æŒ‡é’ˆçš„æ–‡ç« ååˆ†ç²—æµ…ç”šè‡³å­˜åœ¨é”™è¯¯ï¼ˆè¿™é‡Œå°±ä¸ç‚¹åäº†ï¼‰ï¼Œå› æ­¤åšä¸»å†™äº†è¿™ç¯‡æ–‡ç« ä»‹ç»å‡½æ•°æŒ‡é’ˆï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä¸€äº› C è¯­è¨€å­¦ä¹ è€…ã€‚\næ–‡ç« éƒ¨åˆ†å†…å®¹ç¿»è¯‘å¼•ç”¨äº https://www.geeksforgeeks.org/function-pointer-in-c/\nå‡½æ•°æŒ‡é’ˆçš„æ¦‚å¿µ ç±»ä¼¼å˜é‡ï¼Œå‡½æ•°ä¹Ÿä¼šè¢«åˆ†é…ä¸€æ®µå­˜å‚¨ç©ºé—´ï¼Œè¿™æ®µå­˜å‚¨ç©ºé—´çš„é¦–åœ°å€å³è¢«ç§°åšè¿™ä¸ªå‡½æ•°çš„åœ°å€ã€‚è€Œä¸”å‡½æ•°åè¡¨ç¤ºçš„å°±æ˜¯è¿™ä¸ªåœ°å€ã€‚æ—¢ç„¶æ˜¯åœ°å€ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå˜é‡æ¥å­˜æ”¾ï¼Œè¿™ä¸ªæŒ‡é’ˆå˜é‡å°±å«åšå‡½æ•°æŒ‡é’ˆå˜é‡ï¼Œç®€ç§°å‡½æ•°æŒ‡é’ˆã€‚\nå‡½æ•°æŒ‡é’ˆçš„å®šä¹‰ ä¸‹é¢çš„è¯­å¥å®šä¹‰äº†ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå˜é‡ pã€‚å…¶ä¸­ void *è¡¨ç¤ºè¿”å›å€¼ï¼Œ(*p) è¡¨ç¤º p æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œ (int, float) æ˜¯å‡½æ•°çš„å‚æ•°åˆ—è¡¨ã€‚\nvoid *(*p) (int, float); è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæŒ‡é’ˆå˜é‡ pï¼Œå®ƒçš„ç±»å‹ä¸º void * (*)(int, float)\næ‰€ä»¥å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰æ–¹æ³•ä¸ºï¼š\nå‡½æ•°è¿”å›ç±»å‹ (*æŒ‡é’ˆå˜é‡å) (å‡½æ•°å‚æ•°åˆ—è¡¨); è¿™é‡Œçš„å‡½æ•°å‚æ•°åˆ—è¡¨ç±»ä¼¼å‡½æ•°å£°æ˜ï¼Œåªéœ€å†™å‡ºå˜é‡ç±»å‹å³å¯ï¼Œå¹¶ä¸éœ€è¦å®šä¹‰å˜é‡ã€‚\nå³ä¸‹é¢çš„ä¿©ç§å†™æ³•ç­‰ä»·å¹¶ä¸”ç¬¬äºŒç§å†™æ³•ä¸­å®šä¹‰çš„å˜é‡å¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§å†™æ³•ï¼Œä¸è¦ä½¿ç”¨ç¬¬äºŒç§å†™æ³•ã€‚\nvoid *(*p) (int, float); void *(*p) (int a, float b); å¦‚ä½•å¯¹å‡½æ•°æŒ‡é’ˆèµ‹å€¼ int Func(int x); // å‡½æ•°çš„å£°æ˜  int (*p) (int x); // å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰  p = \u0026Func; // å‡½æ•°æŒ‡é’ˆçš„èµ‹å€¼ p = Func; // å¦ä¸€ç§å¯è¡Œçš„å†™æ³• æ³¨ï¼šå¯¹äºä¿©ç§èµ‹å€¼å†™æ³•çš„è¯¦ç»†è¯´æ˜è§å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜\nå‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨ #include  int max(int a, int b); // å‡½æ•°å£°æ˜  int main(int argc, char const *argv[]) { int a = 12; int b = 32; int (*p)(int, int); // å‡½æ•°æŒ‡é’ˆå®šä¹‰  p = \u0026max; // å‡½æ•°æŒ‡é’ˆèµ‹å€¼  int c = (*p)(a, b); // å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨  printf(\"%d\\n\", c); // è¾“å‡º `32`  return 0; } // å‡½æ•°å®šä¹‰ int max(int a, int b) { return a  b ? a : b; } å¦ä¸€ç§å¯è¡Œçš„å†™æ³•\n#include  int max(int a, int b); // å‡½æ•°å£°æ˜  int main(int argc, char const *argv[]) { int a = 12; int b = 32; int (*p)(int, int); // å‡½æ•°æŒ‡é’ˆå®šä¹‰  p = max; // å‡½æ•°æŒ‡é’ˆèµ‹å€¼  int c = *p(a, b); // å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨  printf(\"%d\\n\", c); // è¾“å‡º `32`  return 0; } // å‡½æ•°å®šä¹‰ int max(int a, int b) { return a  b ? a : b; } æ³¨ï¼šå¯¹äºè¿™ä¿©ç§è°ƒç”¨çš„å†™æ³•çš„è¯¦ç»†è¯´æ˜è§å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜\nå‡½æ•°æŒ‡é’ˆä¸­è¦æ³¨æ„çš„ä¸€äº›å†…å®¹  ä¸ä¸€èˆ¬çš„æŒ‡é’ˆä¸åŒï¼Œå‡½æ•°æŒ‡é’ˆæŒ‡å‘ä»£ç è€Œä¸æ˜¯æ•°æ®ã€‚é€šå¸¸ï¼Œä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå­˜å‚¨äº†å¯æ‰§è¡Œä»£ç çš„èµ·å§‹ä½ç½®ã€‚ ä¸æ™®é€šæŒ‡é’ˆä¸åŒï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ—¶ä¸éœ€è¦åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚ å‡½æ•°åä¹Ÿå¯ä»¥ç”¨æ¥è·å–å‡½æ•°çš„åœ°å€ã€‚ï¼ˆè¯¦è§å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜ï¼‰ ç±»ä¼¼æ™®é€šçš„æŒ‡é’ˆï¼Œæˆ‘ä»¬ä¹Ÿæœ‰å‡½æ•°æŒ‡é’ˆæ•°ç»„ã€‚ï¼ˆè¯¦è§å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹ï¼‰ å‡½æ•°æŒ‡é’ˆå¯è¢«ç”¨äº switch case ç»“æ„ä¸­ï¼Œä¾‹å¦‚å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹ä¸­çš„ç¤ºä¾‹ç¨‹åºä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¾“å…¥ 0 ï½ 2 æ¥é€‰æ‹©ä¸åŒçš„æ“ä½œã€‚ å°±åƒæ™®é€šæ•°æ®çš„æŒ‡é’ˆä¸€æ ·ï¼Œä¸€ä¸ªå‡½æ•°æŒ‡é’ˆåŒæ ·å¯ä»¥è¢«ç”¨ä½œå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œä¾‹å¦‚å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹ä¸­çš„ç¨‹åºä¸­ wrapper() å‡½æ•°æ¥å— void (*fun)() ä½œä¸ºå‚æ•°å¹¶ä¸”æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚è¿™ä¸ªç‰¹æ€§æœ‰å¾ˆå¤šçš„åº”ç”¨ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨ä¸­æŸ¥çœ‹æ›´å¤šå†…å®¹ã€‚ C++ ä¸­çš„è®¸å¤šé¢å‘å¯¹è±¡ç‰¹æ€§éƒ½æ˜¯ä½¿ç”¨ C ä¸­çš„å‡½æ•°æŒ‡é’ˆå®ç°çš„ï¼Œä¾‹å¦‚è™šå‡½æ•°ï¼Œç±»æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°æŒ‡é’ˆå®ç°çš„å¦ä¸€ä¸ªç¤ºä¾‹ã€‚  å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜ é€šå¸¸ï¼Œæ—¢ç„¶æ˜¯æŒ‡é’ˆèµ‹å€¼ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å–åœ°å€æ“ä½œæ¥è·å–åœ°å€ï¼Œç„¶åä½¿ç”¨ * è¿ç®—ç¬¦è°ƒç”¨ï¼Œä½†æ˜¯ï¼Œå¯¹äºå‡½æ•°æ¥è¯´ï¼Œç›´æ¥ä½¿ç”¨å‡½æ•°åä¹Ÿå¯ä»¥è·å¾—åœ°å€ã€‚å³å¦‚ä¸‹ä¿©ç§å†™æ³•ç­‰ä»·ï¼š\np = \u0026Func; (*p)(2, 3); p = Func; p(2, 3); ç¼–è¯‘æ‰§è¡Œä»¥ä¸‹ç¨‹åºï¼š\n#include #include  int max(int a, int b); int main(int argc, char const *argv[]) { printf(\"%p\\n\", (max) ); printf(\"%p\\n\", (\u0026max) ); return 0; } int max(int a, int b) { return a  b ? a : b; } ä½ ä¼šå‘ç° (max) (\u0026max) æ‹¥æœ‰ç›¸åŒçš„å€¼ï¼Œå³ç›´æ¥ä½¿ç”¨å‡½æ•°åä¹Ÿå¯ä»¥è·å¾—åœ°å€ã€‚\nå› æ­¤ï¼Œæˆ‘æ›´æ¨èç¬¬äºŒç§æ²¡æœ‰ \u0026 å’Œ * çš„å†™æ³•ï¼Œæ›´åŠ ç›´è§‚æ˜“ç”¨ã€‚\nå‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹ #include  void add(int a, int b) { printf(\"Addition is %d\\n\", a + b); } void subtract(int a, int b) { printf(\"Subtraction is %d\\n\", a - b); } void multiply(int a, int b) { printf(\"Multiplication is %d\\n\", a * b); } int main() { // fun_ptr_arr æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„  void (*fun_ptr_arr[])(int, int) = {add, subtract, multiply}; unsigned int ch, a = 15, b = 10; printf(\"Enter Choice: 0 for add, 1 for subtract and 2 for multiply\\n\"); scanf(\"%d\", \u0026ch); if (ch  2) { return 0; } (*fun_ptr_arr[ch])(a, b); return 0; } å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹ // ä¸€ä¸ªç®€å•çš„ C è¯­è¨€ç¨‹åºæ¥æ¼”ç¤ºä½¿ç”¨å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•° #include  // ä¿©ä¸ªç®€å•çš„å‡½æ•° void fun1() { printf(\"Fun1\\n\"); } void fun2() { printf(\"Fun2\\n\"); } // ä¸€ä¸ªæ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å¹¶åœ¨å†…éƒ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°çš„å‡½æ•° void wrapper(void (*fun)()) { fun(); } int main() { wrapper(fun1); wrapper(fun2); return 0; } å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å°†å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°æ¥é¿å…ä¹¦å†™é‡å¤çš„ä»£ç ï¼Œä¾‹å¦‚è¾ƒä¸ºç®€å•çš„å‡½æ•° qsort() å¯ä»¥è¢«ç”¨æ¥æ’åºæ•°ç»„æˆ–å…¶ä»–ä»»ä½•çš„è‡ªå®šä¹‰ç»“æ„ä½“ã€‚ä¸ä»…è¿™äº›ï¼Œæœ‰äº†å‡½æ•°æŒ‡é’ˆå’Œç©ºæŒ‡é’ˆï¼Œä½¿ç”¨ qsort() å‡½æ•°å¯ä»¥å¯¹ä»»ä½•æ•°æ®ç±»å‹è¿›è¡Œæ’åºã€‚\n// ä¸€ä¸ªå…³äº qsort å’Œæ¯”è¾ƒå™¨çš„å®šä¹‰ #include #include  // ä¸€ä¸ªæ¯”è¾ƒå™¨ç¤ºä¾‹å‡½æ•° // å®ƒè¢«ç”¨å¯¹ä¸€ä¸ªæ•´æ•°æ•°ç»„è¿›è¡Œæ’åº // ä¸ºäº†å¯¹ä»»ä½•å…¶ä»–æ•°æ®ç±»å‹æˆ–æ¡ä»¶çš„ä»»ä½•æ•°ç»„è¿›è¡Œæ’åº // æˆ‘ä»¬éœ€è¦ç¼–å†™æ›´å¤šçš„æ¯”è¾ƒå‡½æ•° // è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ qsort() int compare(const void *a, const void *b) { return (*(int *)a - *(int *)b); } int main() { int arr[] = {10, 5, 15, 12, 90, 80}; int n = sizeof(arr) / sizeof(arr[0]); qsort(arr, n, sizeof(int), compare); for (int i = 0; i  n; i++) { printf(\"%d \", arr[i]); } return 0; } ç±»ä¼¼ qsort() å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå·±çš„å¯ä»¥ç”¨äºä»»ä½•æ•°æ®ç±»å‹çš„å‡½æ•°æ¥å¤„ç†ä¸åŒçš„ä»»åŠ¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæœç´¢å‡½æ•°çš„ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥è¢«ç”¨äºä»»ä½•æ•°æ®ç±»å‹ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å†™ä¸€ä¸ªä¸“é—¨çš„æ¯”è¾ƒå‡½æ•°ä½¿ç”¨è¿™ä¸ªæœç´¢å‡½æ•°æ¥æ‰¾åˆ°ç›¸è¿‘çš„å…ƒç´ ï¼ˆä½äºæŸé˜ˆå€¼ï¼‰ã€‚\n#include #include  // ä¸€ä¸ªè¢«ç”¨æ¥å¯¹æ•´æ•°æ•°ç»„è¿›è¡Œæœç´¢çš„æ¯”è¾ƒå‡½æ•° bool compare(const void *a, const void *b) { return (*(int *)a == *(int *)b); } // å¯ä»¥è¢«ç”¨æ¥åœ¨ä¸€ä¸ªé•¿åº¦ä¸º arr_size çš„æ•°ç»„ arr[] ä¸­ // æœç´¢å…ƒç´  *x çš„é€šç”¨ search() å‡½æ•°ã€‚ // æ³¨æ„è¿™é‡Œä½¿ç”¨ void æŒ‡é’ˆï¼Œè¿™æ ·å‡½æ•°å°±å¯ä»¥åœ¨è°ƒç”¨ // çš„æ—¶å€™ä¼ å…¥ä»»ä½•ç±»å‹çš„å‚æ•° // ele_size æ˜¯æ•°ç»„å…ƒç´ çš„å¤§å° int search(void *arr, int arr_size, int ele_size, void *x, bool compare(const void *, const void *)) { // å› ä¸º char å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ char æŒ‡é’ˆ  // æ¥å¯ä»¥ä¿è¯ç”¨äºä»»ä½•ç±»å‹çš„æŒ‡é’ˆè¿ç®—éƒ½æ­£ç¡®ï¼Œæˆ‘ä»¬  // éœ€è¦å°† index ä¸å…ƒç´ çš„å¤§å° ele_size ç›¸ä¹˜  char *ptr = (char *)arr; int i; for (i = 0; i  arr_size; i++) if (compare(ptr + i * ele_size, x)) return i; // å¦‚æœæ²¡æœ‰æ‰¾åˆ°å…ƒç´   return -1; } int main() { int arr[] = {2, 5, 7, 90, 70}; int n = sizeof(arr) / sizeof(arr[0]); int x = 7; printf(\"Returned index is %d \", search(arr, n, sizeof(int), \u0026x, compare)); return 0; } è¿™ä¸ªå‡½æ•°å¯ä»¥è¢«ç”¨äºä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œåªè¦å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ã€‚\nå¦‚ä½•ä½¿ç”¨ typedef å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹ ä¸ä¸€èˆ¬çš„å®šä¹‰ä¸åŒï¼Œå‡½æ•°æŒ‡é’ˆåœ¨ä½¿ç”¨ typedef é‡å‘½åæ—¶ï¼Œæ–°çš„å˜é‡åä¸æ˜¯åœ¨æœ«å°¾è€Œæ˜¯ç±»ä¼¼å‡½æ•°æŒ‡é’ˆå˜é‡å®šä¹‰çš„å†™æ³•ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\ntypedef int (*type_name) (const void *, double); å…¶ä¸­ int ä¸ºå‡½æ•°è¿”å›å€¼ç±»å‹ï¼Œ const void *, double æ˜¯å‡½æ•°æ¥å—çš„å‚æ•°åˆ—è¡¨ï¼Œ(*type_name) è¡¨æ˜å®šä¹‰çš„æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå®ƒçš„ç±»å‹ä¸º int (*)(const void *, double)ï¼Œæ–°çš„ç±»å‹åä¸º type_nameï¼Œä½ å¯ä»¥ä½¿ç”¨ type_name æ¥å®šä¹‰ä¸€ä¸ªç±»å‹ä¸º int (*)(const void *, double) çš„å‡½æ•°æŒ‡é’ˆã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹çš„æ ¼å¼å¦‚ä¸‹ï¼š\ntypedef å‡½æ•°è¿”å›å€¼ç±»å‹ (*ç±»å‹å) (å‡½æ•°å‚æ•°åˆ—è¡¨) æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ qsort() å‡½æ•°çš„æºä»£ç ï¼š\né¦–å…ˆæ˜¯å‡½æ•° qsort() çš„å£°æ˜ï¼š\nextern void qsort (void *__base, size_t __nmemb, size_t __size, __compar_fn_t __compar) __nonnull ((1, 4)); è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ __compar_fn_tï¼Œæˆ‘ä»¬çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸‹å®ƒçš„å®šä¹‰ï¼š\ntypedef int (*__compar_fn_t) (const void *, const void *); ä¸Šä¾‹ä¸­ search() å‡½æ•°å¯ä»¥è¿™æ ·å®šä¹‰ï¼š\n// ç±»å‹å®šä¹‰ typedef bool (*compare_fun)(const void *, const void *); // å‡½æ•°å£°æ˜ int search(void *arr, int arr_size, int ele_size, void *x, compare_fun compare);  å»ºè®®é˜…è¯»ï¼š https://www.geeksforgeeks.org/function-pointer-in-c/\n",
  "wordCount" : "734",
  "inLanguage": "zh",
  "datePublished": "2020-11-04T21:00:39+08:00",
  "dateModified": "2020-11-04T21:00:39+08:00",
  "author":{
    "@type": "Person",
    "name": "Aimer Neige"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://aimerneige.com/zh/post/c-function-point/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "AimerNeige's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://aimerneige.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://aimerneige.com/zh/" accesskey="h" title="AimerNeige&#39;s Blog (Alt + H)">AimerNeige&#39;s Blog</a>
            <span class="logo-switches">
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://aimerneige.com/en/" title="English"
                            aria-label="English">English</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://aimerneige.com/zh/about/" title="å…³äº">
                    <span>å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/friends/" title="æœ‹å‹">
                    <span>æœ‹å‹</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/post/" title="æ–‡ç« ">
                    <span>æ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/archives/" title="å½’æ¡£">
                    <span>å½’æ¡£</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/tags/" title="æ ‡ç­¾">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/categories/" title="åˆ†ç±»">
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/search/" title="æœç´¢">
                    <span>æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://aimerneige.com/zh/">Home</a>&nbsp;Â»&nbsp;<a href="https://aimerneige.com/zh/post/">æ–‡ç«  ğŸ“</a></div>
    <h1 class="post-title">
      C å‡½æ•°æŒ‡é’ˆ
    </h1>
    <div class="post-description">
      å‡½æ•°æŒ‡é’ˆç”¨æ³•
    </div>
    <div class="post-meta">November 4, 2020&nbsp;Â·&nbsp;Aimer Neige&nbsp;|&nbsp;<a href="https://github.com/aimerneige/blog/edit/master/content/post/c-function-point.zh.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e7%9a%84%e6%a6%82%e5%bf%b5" aria-label="å‡½æ•°æŒ‡é’ˆçš„æ¦‚å¿µ">å‡½æ•°æŒ‡é’ˆçš„æ¦‚å¿µ</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e7%9a%84%e5%ae%9a%e4%b9%89" aria-label="å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰">å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e5%af%b9%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e8%b5%8b%e5%80%bc" aria-label="å¦‚ä½•å¯¹å‡½æ•°æŒ‡é’ˆèµ‹å€¼">å¦‚ä½•å¯¹å‡½æ•°æŒ‡é’ˆèµ‹å€¼</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e7%9a%84%e8%b0%83%e7%94%a8" aria-label="å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨">å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e4%b8%ad%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%80%e4%ba%9b%e5%86%85%e5%ae%b9" aria-label="å‡½æ•°æŒ‡é’ˆä¸­è¦æ³¨æ„çš„ä¸€äº›å†…å®¹">å‡½æ•°æŒ‡é’ˆä¸­è¦æ³¨æ„çš„ä¸€äº›å†…å®¹</a></li>
                <li>
                    <a href="#%e5%af%b9%e5%87%bd%e6%95%b0%e8%b5%8b%e5%80%bc%e5%92%8c%e8%b0%83%e7%94%a8%e7%9a%84%e4%b8%80%e4%ba%9b%e8%af%b4%e6%98%8e" aria-label="å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜">å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e6%95%b0%e7%bb%84%e7%a4%ba%e4%be%8b" aria-label="å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹">å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e4%bd%9c%e4%b8%ba%e5%8f%82%e6%95%b0%e7%9a%84%e7%a4%ba%e4%be%8b" aria-label="å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹">å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e4%bd%9c%e4%b8%ba%e5%8f%82%e6%95%b0%e7%9a%84%e5%ba%94%e7%94%a8" aria-label="å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨">å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8-typedef-%e5%ae%9a%e4%b9%89%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e7%b1%bb%e5%9e%8b" aria-label="å¦‚ä½•ä½¿ç”¨ typedef å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹">å¦‚ä½•ä½¿ç”¨ typedef å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>å‡½æ•°æŒ‡é’ˆåœ¨å¤§å‹çš„ C è¯­è¨€é¡¹ç›®ä¸­ååˆ†é‡è¦ï¼Œä½†æ˜¯å­¦æ ¡å¯¹å®ƒçš„ä»‹ç»ä¸€å¸¦è€Œè¿‡ï¼Œå›½å†…ä¸€äº›ä»‹ç»å‡½æ•°æŒ‡é’ˆçš„æ–‡ç« ååˆ†ç²—æµ…ç”šè‡³å­˜åœ¨é”™è¯¯ï¼ˆè¿™é‡Œå°±ä¸ç‚¹åäº†ï¼‰ï¼Œå› æ­¤åšä¸»å†™äº†è¿™ç¯‡æ–‡ç« ä»‹ç»å‡½æ•°æŒ‡é’ˆï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä¸€äº› C è¯­è¨€å­¦ä¹ è€…ã€‚</p>
<p>æ–‡ç« éƒ¨åˆ†å†…å®¹ç¿»è¯‘å¼•ç”¨äº <a href="https://www.geeksforgeeks.org/function-pointer-in-c/">https://www.geeksforgeeks.org/function-pointer-in-c/</a></p>
<h2 id="å‡½æ•°æŒ‡é’ˆçš„æ¦‚å¿µ">å‡½æ•°æŒ‡é’ˆçš„æ¦‚å¿µ<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°æŒ‡é’ˆçš„æ¦‚å¿µ">#</a></h2>
<p>ç±»ä¼¼å˜é‡ï¼Œå‡½æ•°ä¹Ÿä¼šè¢«åˆ†é…ä¸€æ®µå­˜å‚¨ç©ºé—´ï¼Œè¿™æ®µå­˜å‚¨ç©ºé—´çš„é¦–åœ°å€å³è¢«ç§°åšè¿™ä¸ªå‡½æ•°çš„åœ°å€ã€‚è€Œä¸”å‡½æ•°åè¡¨ç¤ºçš„å°±æ˜¯è¿™ä¸ªåœ°å€ã€‚æ—¢ç„¶æ˜¯åœ°å€ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå˜é‡æ¥å­˜æ”¾ï¼Œè¿™ä¸ªæŒ‡é’ˆå˜é‡å°±å«åšå‡½æ•°æŒ‡é’ˆå˜é‡ï¼Œç®€ç§°å‡½æ•°æŒ‡é’ˆã€‚</p>
<h2 id="å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰">å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰">#</a></h2>
<p>ä¸‹é¢çš„è¯­å¥å®šä¹‰äº†ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå˜é‡ pã€‚å…¶ä¸­ <code>void *</code>è¡¨ç¤ºè¿”å›å€¼ï¼Œ<code>(*p)</code> è¡¨ç¤º p æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œ <code>(int, float)</code> æ˜¯å‡½æ•°çš„å‚æ•°åˆ—è¡¨ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>(<span style="color:#f92672">*</span>p) (<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">float</span>);
</code></pre></div><p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæŒ‡é’ˆå˜é‡ pï¼Œå®ƒçš„ç±»å‹ä¸º <code>void * (*)(int, float)</code></p>
<p>æ‰€ä»¥å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰æ–¹æ³•ä¸ºï¼š</p>
<pre><code>å‡½æ•°è¿”å›ç±»å‹ (*æŒ‡é’ˆå˜é‡å) (å‡½æ•°å‚æ•°åˆ—è¡¨);
</code></pre><p>è¿™é‡Œçš„å‡½æ•°å‚æ•°åˆ—è¡¨ç±»ä¼¼å‡½æ•°å£°æ˜ï¼Œåªéœ€å†™å‡ºå˜é‡ç±»å‹å³å¯ï¼Œå¹¶ä¸éœ€è¦å®šä¹‰å˜é‡ã€‚</p>
<p>å³ä¸‹é¢çš„ä¿©ç§å†™æ³•ç­‰ä»·å¹¶ä¸”ç¬¬äºŒç§å†™æ³•ä¸­å®šä¹‰çš„å˜é‡å¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§å†™æ³•ï¼Œä¸è¦ä½¿ç”¨ç¬¬äºŒç§å†™æ³•ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>(<span style="color:#f92672">*</span>p) (<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">float</span>);
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>(<span style="color:#f92672">*</span>p) (<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">float</span> b);
</code></pre></div><h2 id="å¦‚ä½•å¯¹å‡½æ•°æŒ‡é’ˆèµ‹å€¼">å¦‚ä½•å¯¹å‡½æ•°æŒ‡é’ˆèµ‹å€¼<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•å¯¹å‡½æ•°æŒ‡é’ˆèµ‹å€¼">#</a></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">Func</span>(<span style="color:#66d9ef">int</span> x); <span style="color:#75715e">// å‡½æ•°çš„å£°æ˜
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>p) (<span style="color:#66d9ef">int</span> x); <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰
</span><span style="color:#75715e"></span>
p <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>Func; <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆçš„èµ‹å€¼
</span><span style="color:#75715e"></span>p <span style="color:#f92672">=</span> Func; <span style="color:#75715e">// å¦ä¸€ç§å¯è¡Œçš„å†™æ³•
</span></code></pre></div><p>æ³¨ï¼šå¯¹äºä¿©ç§èµ‹å€¼å†™æ³•çš„è¯¦ç»†è¯´æ˜è§<a href="#%E5%AF%B9%E5%87%BD%E6%95%B0%E8%B5%8B%E5%80%BC%E5%92%8C%E8%B0%83%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%B4%E6%98%8E">å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜</a></p>
<h2 id="å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨">å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨">#</a></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">max</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b); <span style="color:#75715e">// å‡½æ•°å£°æ˜
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#66d9ef">const</span> <span style="color:#f92672">*</span>argv[])
{
    <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>;
    <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">32</span>;

    <span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>p)(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>); <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆå®šä¹‰
</span><span style="color:#75715e"></span>    p <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>max; <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆèµ‹å€¼
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">int</span> c <span style="color:#f92672">=</span> (<span style="color:#f92672">*</span>p)(a, b); <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨
</span><span style="color:#75715e"></span>    printf(<span style="color:#e6db74">&#34;%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, c); <span style="color:#75715e">// è¾“å‡º `32`
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

<span style="color:#75715e">// å‡½æ•°å®šä¹‰
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">max</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b)
{
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">&gt;</span> b <span style="color:#f92672">?</span> a : b;
}
</code></pre></div><p>å¦ä¸€ç§å¯è¡Œçš„å†™æ³•</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">max</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b); <span style="color:#75715e">// å‡½æ•°å£°æ˜
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#66d9ef">const</span> <span style="color:#f92672">*</span>argv[])
{
    <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>;
    <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">32</span>;

    <span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>p)(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>); <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆå®šä¹‰
</span><span style="color:#75715e"></span>    p <span style="color:#f92672">=</span> max; <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆèµ‹å€¼
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">int</span> c <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>p(a, b); <span style="color:#75715e">// å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨
</span><span style="color:#75715e"></span>    printf(<span style="color:#e6db74">&#34;%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, c); <span style="color:#75715e">// è¾“å‡º `32`
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

<span style="color:#75715e">// å‡½æ•°å®šä¹‰
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">max</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b)
{
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">&gt;</span> b <span style="color:#f92672">?</span> a : b;
}
</code></pre></div><p>æ³¨ï¼šå¯¹äºè¿™ä¿©ç§è°ƒç”¨çš„å†™æ³•çš„è¯¦ç»†è¯´æ˜è§<a href="#%E5%AF%B9%E5%87%BD%E6%95%B0%E8%B5%8B%E5%80%BC%E5%92%8C%E8%B0%83%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%B4%E6%98%8E">å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜</a></p>
<h2 id="å‡½æ•°æŒ‡é’ˆä¸­è¦æ³¨æ„çš„ä¸€äº›å†…å®¹">å‡½æ•°æŒ‡é’ˆä¸­è¦æ³¨æ„çš„ä¸€äº›å†…å®¹<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°æŒ‡é’ˆä¸­è¦æ³¨æ„çš„ä¸€äº›å†…å®¹">#</a></h2>
<ol>
<li>ä¸ä¸€èˆ¬çš„æŒ‡é’ˆä¸åŒï¼Œå‡½æ•°æŒ‡é’ˆæŒ‡å‘ä»£ç è€Œä¸æ˜¯æ•°æ®ã€‚é€šå¸¸ï¼Œä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå­˜å‚¨äº†å¯æ‰§è¡Œä»£ç çš„èµ·å§‹ä½ç½®ã€‚</li>
<li>ä¸æ™®é€šæŒ‡é’ˆä¸åŒï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ—¶ä¸éœ€è¦åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚</li>
<li>å‡½æ•°åä¹Ÿå¯ä»¥ç”¨æ¥è·å–å‡½æ•°çš„åœ°å€ã€‚ï¼ˆè¯¦è§<a href="#%E5%AF%B9%E5%87%BD%E6%95%B0%E8%B5%8B%E5%80%BC%E5%92%8C%E8%B0%83%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%B4%E6%98%8E">å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜</a>ï¼‰</li>
<li>ç±»ä¼¼æ™®é€šçš„æŒ‡é’ˆï¼Œæˆ‘ä»¬ä¹Ÿæœ‰å‡½æ•°æŒ‡é’ˆæ•°ç»„ã€‚ï¼ˆè¯¦è§<a href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%A4%BA%E4%BE%8B">å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹</a>ï¼‰</li>
<li>å‡½æ•°æŒ‡é’ˆå¯è¢«ç”¨äº switch case ç»“æ„ä¸­ï¼Œä¾‹å¦‚<a href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%A4%BA%E4%BE%8B">å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹</a>ä¸­çš„ç¤ºä¾‹ç¨‹åºä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¾“å…¥ 0 ï½ 2 æ¥é€‰æ‹©ä¸åŒçš„æ“ä½œã€‚</li>
<li>å°±åƒæ™®é€šæ•°æ®çš„æŒ‡é’ˆä¸€æ ·ï¼Œä¸€ä¸ªå‡½æ•°æŒ‡é’ˆåŒæ ·å¯ä»¥è¢«ç”¨ä½œå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œä¾‹å¦‚<a href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E7%9A%84%E7%A4%BA%E4%BE%8B">å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹</a>ä¸­çš„ç¨‹åºä¸­ <code>wrapper()</code> å‡½æ•°æ¥å— <code>void (*fun)()</code> ä½œä¸ºå‚æ•°å¹¶ä¸”æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚è¿™ä¸ªç‰¹æ€§æœ‰å¾ˆå¤šçš„åº”ç”¨ï¼Œä½ å¯ä»¥åœ¨<a href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8">å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨</a>ä¸­æŸ¥çœ‹æ›´å¤šå†…å®¹ã€‚</li>
<li>C++ ä¸­çš„è®¸å¤šé¢å‘å¯¹è±¡ç‰¹æ€§éƒ½æ˜¯ä½¿ç”¨ C ä¸­çš„å‡½æ•°æŒ‡é’ˆå®ç°çš„ï¼Œä¾‹å¦‚è™šå‡½æ•°ï¼Œç±»æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°æŒ‡é’ˆå®ç°çš„å¦ä¸€ä¸ªç¤ºä¾‹ã€‚</li>
</ol>
<h2 id="å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜">å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜<a hidden class="anchor" aria-hidden="true" href="#å¯¹å‡½æ•°èµ‹å€¼å’Œè°ƒç”¨çš„ä¸€äº›è¯´æ˜">#</a></h2>
<p>é€šå¸¸ï¼Œæ—¢ç„¶æ˜¯æŒ‡é’ˆèµ‹å€¼ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å–åœ°å€æ“ä½œæ¥è·å–åœ°å€ï¼Œç„¶åä½¿ç”¨ <code>*</code> è¿ç®—ç¬¦è°ƒç”¨ï¼Œä½†æ˜¯ï¼Œå¯¹äºå‡½æ•°æ¥è¯´ï¼Œç›´æ¥ä½¿ç”¨å‡½æ•°åä¹Ÿå¯ä»¥è·å¾—åœ°å€ã€‚å³å¦‚ä¸‹ä¿©ç§å†™æ³•ç­‰ä»·ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">p <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>Func;
(<span style="color:#f92672">*</span>p)(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>);
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">p <span style="color:#f92672">=</span> Func;
p(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>);
</code></pre></div><p>ç¼–è¯‘æ‰§è¡Œä»¥ä¸‹ç¨‹åºï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">max</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b);

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#66d9ef">const</span> <span style="color:#f92672">*</span>argv[])
{
    printf(<span style="color:#e6db74">&#34;%p</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>,  (max) );
    printf(<span style="color:#e6db74">&#34;%p</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, (<span style="color:#f92672">&amp;</span>max) );
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">max</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b)
{
    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">&gt;</span> b <span style="color:#f92672">?</span> a : b;
}
</code></pre></div><p>ä½ ä¼šå‘ç° <code>(max)</code> <code>(&amp;max)</code> æ‹¥æœ‰ç›¸åŒçš„å€¼ï¼Œå³ç›´æ¥ä½¿ç”¨å‡½æ•°åä¹Ÿå¯ä»¥è·å¾—åœ°å€ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘æ›´æ¨èç¬¬äºŒç§æ²¡æœ‰ <code>&amp;</code> å’Œ <code>*</code> çš„å†™æ³•ï¼Œæ›´åŠ ç›´è§‚æ˜“ç”¨ã€‚</p>
<h2 id="å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹">å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°æŒ‡é’ˆæ•°ç»„ç¤ºä¾‹">#</a></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b)
{
    printf(<span style="color:#e6db74">&#34;Addition is %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, a <span style="color:#f92672">+</span> b);
}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">subtract</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b)
{
    printf(<span style="color:#e6db74">&#34;Subtraction is %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, a <span style="color:#f92672">-</span> b);
}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">multiply</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b)
{
    printf(<span style="color:#e6db74">&#34;Multiplication is %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, a <span style="color:#f92672">*</span> b);
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    <span style="color:#75715e">// fun_ptr_arr æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">void</span> (<span style="color:#f92672">*</span>fun_ptr_arr[])(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>) <span style="color:#f92672">=</span> {add, subtract, multiply};
    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">int</span> ch, a <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>, b <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;

    printf(<span style="color:#e6db74">&#34;Enter Choice: 0 for add, 1 for subtract and 2 for multiply</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
    scanf(<span style="color:#e6db74">&#34;%d&#34;</span>, <span style="color:#f92672">&amp;</span>ch);

    <span style="color:#66d9ef">if</span> (ch <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span>)
    {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
    }

    (<span style="color:#f92672">*</span>fun_ptr_arr[ch])(a, b);

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><h2 id="å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹">å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„ç¤ºä¾‹">#</a></h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">// ä¸€ä¸ªç®€å•çš„ C è¯­è¨€ç¨‹åºæ¥æ¼”ç¤ºä½¿ç”¨å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°
</span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// ä¿©ä¸ªç®€å•çš„å‡½æ•°
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fun1</span>() { printf(<span style="color:#e6db74">&#34;Fun1</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>); }
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fun2</span>() { printf(<span style="color:#e6db74">&#34;Fun2</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>); }

<span style="color:#75715e">// ä¸€ä¸ªæ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å¹¶åœ¨å†…éƒ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°çš„å‡½æ•°
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">wrapper</span>(<span style="color:#66d9ef">void</span> (<span style="color:#f92672">*</span>fun)())
{
    fun();
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    wrapper(fun1);
    wrapper(fun2);
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><h2 id="å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨">å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨<a hidden class="anchor" aria-hidden="true" href="#å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°çš„åº”ç”¨">#</a></h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å°†å‡½æ•°æŒ‡é’ˆä½œä¸ºå‚æ•°æ¥é¿å…ä¹¦å†™é‡å¤çš„ä»£ç ï¼Œä¾‹å¦‚è¾ƒä¸ºç®€å•çš„å‡½æ•° <code>qsort()</code> å¯ä»¥è¢«ç”¨æ¥æ’åºæ•°ç»„æˆ–å…¶ä»–ä»»ä½•çš„è‡ªå®šä¹‰ç»“æ„ä½“ã€‚ä¸ä»…è¿™äº›ï¼Œæœ‰äº†å‡½æ•°æŒ‡é’ˆå’Œç©ºæŒ‡é’ˆï¼Œä½¿ç”¨ <code>qsort()</code> å‡½æ•°å¯ä»¥å¯¹ä»»ä½•æ•°æ®ç±»å‹è¿›è¡Œæ’åºã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">// ä¸€ä¸ªå…³äº qsort å’Œæ¯”è¾ƒå™¨çš„å®šä¹‰
</span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// ä¸€ä¸ªæ¯”è¾ƒå™¨ç¤ºä¾‹å‡½æ•°
</span><span style="color:#75715e">// å®ƒè¢«ç”¨å¯¹ä¸€ä¸ªæ•´æ•°æ•°ç»„è¿›è¡Œæ’åº
</span><span style="color:#75715e">// ä¸ºäº†å¯¹ä»»ä½•å…¶ä»–æ•°æ®ç±»å‹æˆ–æ¡ä»¶çš„ä»»ä½•æ•°ç»„è¿›è¡Œæ’åº
</span><span style="color:#75715e">// æˆ‘ä»¬éœ€è¦ç¼–å†™æ›´å¤šçš„æ¯”è¾ƒå‡½æ•°
</span><span style="color:#75715e">// è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ qsort()
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compare</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>a, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>b)
{
    <span style="color:#66d9ef">return</span> (<span style="color:#f92672">*</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>)a <span style="color:#f92672">-</span> <span style="color:#f92672">*</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>)b);
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    <span style="color:#66d9ef">int</span> arr[] <span style="color:#f92672">=</span> {<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">80</span>};
    <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> <span style="color:#66d9ef">sizeof</span>(arr) <span style="color:#f92672">/</span> <span style="color:#66d9ef">sizeof</span>(arr[<span style="color:#ae81ff">0</span>]);

    qsort(arr, n, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>), compare);

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
        printf(<span style="color:#e6db74">&#34;%d &#34;</span>, arr[i]);
    }
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>ç±»ä¼¼ <code>qsort()</code> å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå·±çš„å¯ä»¥ç”¨äºä»»ä½•æ•°æ®ç±»å‹çš„å‡½æ•°æ¥å¤„ç†ä¸åŒçš„ä»»åŠ¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæœç´¢å‡½æ•°çš„ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥è¢«ç”¨äºä»»ä½•æ•°æ®ç±»å‹ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å†™ä¸€ä¸ªä¸“é—¨çš„æ¯”è¾ƒå‡½æ•°ä½¿ç”¨è¿™ä¸ªæœç´¢å‡½æ•°æ¥æ‰¾åˆ°ç›¸è¿‘çš„å…ƒç´ ï¼ˆä½äºæŸé˜ˆå€¼ï¼‰ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdbool.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// ä¸€ä¸ªè¢«ç”¨æ¥å¯¹æ•´æ•°æ•°ç»„è¿›è¡Œæœç´¢çš„æ¯”è¾ƒå‡½æ•°
</span><span style="color:#75715e"></span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">compare</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>a, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>b)
{
    <span style="color:#66d9ef">return</span> (<span style="color:#f92672">*</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>)a <span style="color:#f92672">==</span> <span style="color:#f92672">*</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>)b);
}

<span style="color:#75715e">// å¯ä»¥è¢«ç”¨æ¥åœ¨ä¸€ä¸ªé•¿åº¦ä¸º arr_size çš„æ•°ç»„ arr[] ä¸­
</span><span style="color:#75715e">// æœç´¢å…ƒç´  *x çš„é€šç”¨ search() å‡½æ•°ã€‚
</span><span style="color:#75715e">// æ³¨æ„è¿™é‡Œä½¿ç”¨ void æŒ‡é’ˆï¼Œè¿™æ ·å‡½æ•°å°±å¯ä»¥åœ¨è°ƒç”¨
</span><span style="color:#75715e">// çš„æ—¶å€™ä¼ å…¥ä»»ä½•ç±»å‹çš„å‚æ•°
</span><span style="color:#75715e">// ele_size æ˜¯æ•°ç»„å…ƒç´ çš„å¤§å°
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">search</span>(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>arr, <span style="color:#66d9ef">int</span> arr_size, <span style="color:#66d9ef">int</span> ele_size, <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>x,
           <span style="color:#66d9ef">bool</span> compare(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>))
{

    <span style="color:#75715e">// å› ä¸º char å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ char æŒ‡é’ˆ
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// æ¥å¯ä»¥ä¿è¯ç”¨äºä»»ä½•ç±»å‹çš„æŒ‡é’ˆè¿ç®—éƒ½æ­£ç¡®ï¼Œæˆ‘ä»¬
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// éœ€è¦å°† index ä¸å…ƒç´ çš„å¤§å° ele_size ç›¸ä¹˜
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>ptr <span style="color:#f92672">=</span> (<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>)arr;

    <span style="color:#66d9ef">int</span> i;
    <span style="color:#66d9ef">for</span> (i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> arr_size; i<span style="color:#f92672">++</span>)
        <span style="color:#66d9ef">if</span> (compare(ptr <span style="color:#f92672">+</span> i <span style="color:#f92672">*</span> ele_size, x))
            <span style="color:#66d9ef">return</span> i;

    <span style="color:#75715e">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°å…ƒç´ 
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    <span style="color:#66d9ef">int</span> arr[] <span style="color:#f92672">=</span> {<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">70</span>};
    <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> <span style="color:#66d9ef">sizeof</span>(arr) <span style="color:#f92672">/</span> <span style="color:#66d9ef">sizeof</span>(arr[<span style="color:#ae81ff">0</span>]);
    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;
    printf(<span style="color:#e6db74">&#34;Returned index is %d &#34;</span>, search(arr, n,
                        <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>), <span style="color:#f92672">&amp;</span>x, compare));
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>è¿™ä¸ªå‡½æ•°å¯ä»¥è¢«ç”¨äºä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œåªè¦å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨-typedef-å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹">å¦‚ä½•ä½¿ç”¨ typedef å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•ä½¿ç”¨-typedef-å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹">#</a></h2>
<p>ä¸ä¸€èˆ¬çš„å®šä¹‰ä¸åŒï¼Œå‡½æ•°æŒ‡é’ˆåœ¨ä½¿ç”¨ typedef é‡å‘½åæ—¶ï¼Œæ–°çš„å˜é‡åä¸æ˜¯åœ¨æœ«å°¾è€Œæ˜¯ç±»ä¼¼å‡½æ•°æŒ‡é’ˆå˜é‡å®šä¹‰çš„å†™æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">typedef</span> <span style="color:#a6e22e">int</span> (<span style="color:#f92672">*</span>type_name) (<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>, <span style="color:#66d9ef">double</span>);
</code></pre></div><p>å…¶ä¸­ <code>int</code> ä¸ºå‡½æ•°è¿”å›å€¼ç±»å‹ï¼Œ <code>const void *, double</code> æ˜¯å‡½æ•°æ¥å—çš„å‚æ•°åˆ—è¡¨ï¼Œ<code>(*type_name)</code> è¡¨æ˜å®šä¹‰çš„æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå®ƒçš„ç±»å‹ä¸º <code>int (*)(const void *, double)</code>ï¼Œæ–°çš„ç±»å‹åä¸º <code>type_name</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>type_name</code> æ¥å®šä¹‰ä¸€ä¸ªç±»å‹ä¸º <code>int (*)(const void *, double)</code> çš„å‡½æ•°æŒ‡é’ˆã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨å®šä¹‰å‡½æ•°æŒ‡é’ˆç±»å‹çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code>typedef å‡½æ•°è¿”å›å€¼ç±»å‹ (*ç±»å‹å) (å‡½æ•°å‚æ•°åˆ—è¡¨)
</code></pre><p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ <code>qsort()</code> å‡½æ•°çš„æºä»£ç ï¼š</p>
<p>é¦–å…ˆæ˜¯å‡½æ•° <code>qsort()</code> çš„å£°æ˜ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">qsort</span> (<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>__base, size_t __nmemb, size_t __size,
		   __compar_fn_t __compar) __nonnull ((<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>));
</code></pre></div><p>è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ <code>__compar_fn_t</code>ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸‹å®ƒçš„å®šä¹‰ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">typedef</span> <span style="color:#a6e22e">int</span> (<span style="color:#f92672">*</span>__compar_fn_t) (<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>);
</code></pre></div><p>ä¸Šä¾‹ä¸­ <code>search()</code> å‡½æ•°å¯ä»¥è¿™æ ·å®šä¹‰ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">// ç±»å‹å®šä¹‰
</span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#a6e22e">bool</span> (<span style="color:#f92672">*</span>compare_fun)(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>);
<span style="color:#75715e">// å‡½æ•°å£°æ˜
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">search</span>(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>arr, <span style="color:#66d9ef">int</span> arr_size, <span style="color:#66d9ef">int</span> ele_size, <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>x, compare_fun compare);
</code></pre></div><hr>
<p>å»ºè®®é˜…è¯»ï¼š <a href="https://www.geeksforgeeks.org/function-pointer-in-c/">https://www.geeksforgeeks.org/function-pointer-in-c/</a></p>


  </div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://aimerneige.com/zh/tags/c/c&#43;&#43;/">C/C&#43;&#43;</a></li>
      <li><a href="https://aimerneige.com/zh/tags/teach/">Teach</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://aimerneige.com/zh/post/this-is-not-bug/">
    <span class="title">Â« Prev Page</span>
    <br>
    <span>è¿™ä¸æ˜¯ Bugï¼Œè€Œæ˜¯è¯­è¨€ç‰¹æ€§</span>
  </a>
  <a class="next" href="https://aimerneige.com/zh/post/c-thread-basic/">
    <span class="title">Next Page Â»</span>
    <br>
    <span>C è¯­è¨€å¤šçº¿ç¨‹åŸºç¡€</span>
  </a>
</nav>

  </footer><a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a>

<script src="https://utteranc.es/client.js"
        repo="aimerneige/aimerneige.github.io"
        issue-term="title"
        label="comment"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>



</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://aimerneige.com/zh/">AimerNeige&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
