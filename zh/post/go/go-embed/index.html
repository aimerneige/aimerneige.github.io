<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Golang embed | AimerNeige&#39;s Blog</title>
<meta name="keywords" content="golang, embed">
<meta name="description" content="å‰è¨€ åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸å¯é¿å…åœ°è¦å¤„ç†é™æ€æ–‡ä»¶ï¼Œå¦‚æœå°†æºç ç›´æ¥ä½œä¸ºè½¯ä»¶æä¾›é—®é¢˜ä¸å¤§ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„è¯»å–è¿™äº›é™æ€æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æœé¡¹ç›®ä½œä¸ºåº“å‘å¤–å…¬å¸ƒæ˜¾ç„¶ä¸å¯è¡Œï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯è¯»å–ä¸åˆ°æ–‡ä»¶çš„ï¼Œè€Œä½¿ç”¨ç»å¯¹è·¯å¾„å´ä¼šå¸¦æ¥æ›´å¤§çš„é—®é¢˜ï¼šå› ä¸ºä¸åŒçš„äººä½¿ç”¨ï¼Œè·¯å¾„ç»å¯¹ä¸å¯èƒ½å®Œå…¨ä¸€è‡´çš„ã€‚å¦‚æœè¦æ±‚ç”¨æˆ·åœ¨æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®è¿™äº›ä¾èµ–çš„é™æ€æ–‡ä»¶ï¼Œè™½ç„¶å¯è¡Œä½†æ˜¯ä¼šç»™ç”¨æˆ·å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œè€Œä¸”è¿™æ ·çš„å®ç°æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿä¼˜é›…ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›é™æ€æ–‡ä»¶ä¸€èµ·æ‰“åŒ…è¿›å¯æ‰§è¡Œæ–‡ä»¶ä¼¼ä¹æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç¡¬ç¼–ç ï¼Œå°†é™æ€æ–‡ä»¶ä»¥æ–‡æœ¬æˆ–å­—èŠ‚æ•°ç»„çš„å½¢å¼ç›´æ¥ç¼–å…¥æºä»£ç ï¼Œgo ä¹Ÿæœ‰ä¸€äº›åº“å¸®ä½ è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œæ¯”å¦‚ go-bindataã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåº“å·²ç»ç»ˆæ­¢ç»´æŠ¤äº†ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ go 1.16 ç‰ˆæœ¬ï¼Œå®˜æ–¹å‘å¸ƒäº† embed å®Œç¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡ç®€è¦ä»‹ç» embed çš„ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚
embed å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ hello.txt
Hello World! Hello go embed! æˆ‘ä»¬è¦å†™ä¸€ä¸ªç¨‹åºè¯»å–å…¶ä¸­çš„å†…å®¹å¹¶è¾“å‡ºåˆ°ç»ˆç«¯ï¼š
// file: main.go package main import ( &#34;fmt&#34; &#34;os&#34; ) func main() { s, err := os.ReadFile(&#34;./hello.txt&#34;) if err != nil { panic(err) } fmt.Println(string(s)) } å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ
âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ hello.txt â””â”€â”€ main.go 0 directories, 3 files âœ go build main.go âœ ./main Hello World! Hello go embed!">
<meta name="author" content="Aimer Neige">
<link rel="canonical" href="https://aimerneige.com/zh/post/go/go-embed/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css" integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://aimerneige.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://aimerneige.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://aimerneige.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://aimerneige.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://aimerneige.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://aimerneige.com/zh/post/go/go-embed/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5QJPQTJ618"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-5QJPQTJ618', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Golang embed" />
<meta property="og:description" content="å‰è¨€ åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸å¯é¿å…åœ°è¦å¤„ç†é™æ€æ–‡ä»¶ï¼Œå¦‚æœå°†æºç ç›´æ¥ä½œä¸ºè½¯ä»¶æä¾›é—®é¢˜ä¸å¤§ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„è¯»å–è¿™äº›é™æ€æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æœé¡¹ç›®ä½œä¸ºåº“å‘å¤–å…¬å¸ƒæ˜¾ç„¶ä¸å¯è¡Œï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯è¯»å–ä¸åˆ°æ–‡ä»¶çš„ï¼Œè€Œä½¿ç”¨ç»å¯¹è·¯å¾„å´ä¼šå¸¦æ¥æ›´å¤§çš„é—®é¢˜ï¼šå› ä¸ºä¸åŒçš„äººä½¿ç”¨ï¼Œè·¯å¾„ç»å¯¹ä¸å¯èƒ½å®Œå…¨ä¸€è‡´çš„ã€‚å¦‚æœè¦æ±‚ç”¨æˆ·åœ¨æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®è¿™äº›ä¾èµ–çš„é™æ€æ–‡ä»¶ï¼Œè™½ç„¶å¯è¡Œä½†æ˜¯ä¼šç»™ç”¨æˆ·å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œè€Œä¸”è¿™æ ·çš„å®ç°æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿä¼˜é›…ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›é™æ€æ–‡ä»¶ä¸€èµ·æ‰“åŒ…è¿›å¯æ‰§è¡Œæ–‡ä»¶ä¼¼ä¹æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç¡¬ç¼–ç ï¼Œå°†é™æ€æ–‡ä»¶ä»¥æ–‡æœ¬æˆ–å­—èŠ‚æ•°ç»„çš„å½¢å¼ç›´æ¥ç¼–å…¥æºä»£ç ï¼Œgo ä¹Ÿæœ‰ä¸€äº›åº“å¸®ä½ è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œæ¯”å¦‚ go-bindataã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåº“å·²ç»ç»ˆæ­¢ç»´æŠ¤äº†ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ go 1.16 ç‰ˆæœ¬ï¼Œå®˜æ–¹å‘å¸ƒäº† embed å®Œç¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡ç®€è¦ä»‹ç» embed çš„ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚
embed å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ hello.txt
Hello World! Hello go embed! æˆ‘ä»¬è¦å†™ä¸€ä¸ªç¨‹åºè¯»å–å…¶ä¸­çš„å†…å®¹å¹¶è¾“å‡ºåˆ°ç»ˆç«¯ï¼š
// file: main.go package main import ( &#34;fmt&#34; &#34;os&#34; ) func main() { s, err := os.ReadFile(&#34;./hello.txt&#34;) if err != nil { panic(err) } fmt.Println(string(s)) } å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ
âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ hello.txt â””â”€â”€ main.go 0 directories, 3 files âœ go build main.go âœ ./main Hello World! Hello go embed!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://aimerneige.com/zh/post/go/go-embed/" />
<meta property="og:image" content="https://aimerneige.com/images/go-embed.webp" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-08-13T23:57:11+08:00" />
<meta property="article:modified_time" content="2022-08-13T23:57:11+08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://aimerneige.com/images/go-embed.webp" />
<meta name="twitter:title" content="Golang embed"/>
<meta name="twitter:description" content="å‰è¨€ åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸å¯é¿å…åœ°è¦å¤„ç†é™æ€æ–‡ä»¶ï¼Œå¦‚æœå°†æºç ç›´æ¥ä½œä¸ºè½¯ä»¶æä¾›é—®é¢˜ä¸å¤§ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„è¯»å–è¿™äº›é™æ€æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æœé¡¹ç›®ä½œä¸ºåº“å‘å¤–å…¬å¸ƒæ˜¾ç„¶ä¸å¯è¡Œï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯è¯»å–ä¸åˆ°æ–‡ä»¶çš„ï¼Œè€Œä½¿ç”¨ç»å¯¹è·¯å¾„å´ä¼šå¸¦æ¥æ›´å¤§çš„é—®é¢˜ï¼šå› ä¸ºä¸åŒçš„äººä½¿ç”¨ï¼Œè·¯å¾„ç»å¯¹ä¸å¯èƒ½å®Œå…¨ä¸€è‡´çš„ã€‚å¦‚æœè¦æ±‚ç”¨æˆ·åœ¨æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®è¿™äº›ä¾èµ–çš„é™æ€æ–‡ä»¶ï¼Œè™½ç„¶å¯è¡Œä½†æ˜¯ä¼šç»™ç”¨æˆ·å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œè€Œä¸”è¿™æ ·çš„å®ç°æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿä¼˜é›…ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›é™æ€æ–‡ä»¶ä¸€èµ·æ‰“åŒ…è¿›å¯æ‰§è¡Œæ–‡ä»¶ä¼¼ä¹æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç¡¬ç¼–ç ï¼Œå°†é™æ€æ–‡ä»¶ä»¥æ–‡æœ¬æˆ–å­—èŠ‚æ•°ç»„çš„å½¢å¼ç›´æ¥ç¼–å…¥æºä»£ç ï¼Œgo ä¹Ÿæœ‰ä¸€äº›åº“å¸®ä½ è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œæ¯”å¦‚ go-bindataã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåº“å·²ç»ç»ˆæ­¢ç»´æŠ¤äº†ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ go 1.16 ç‰ˆæœ¬ï¼Œå®˜æ–¹å‘å¸ƒäº† embed å®Œç¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡ç®€è¦ä»‹ç» embed çš„ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚
embed å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ hello.txt
Hello World! Hello go embed! æˆ‘ä»¬è¦å†™ä¸€ä¸ªç¨‹åºè¯»å–å…¶ä¸­çš„å†…å®¹å¹¶è¾“å‡ºåˆ°ç»ˆç«¯ï¼š
// file: main.go package main import ( &#34;fmt&#34; &#34;os&#34; ) func main() { s, err := os.ReadFile(&#34;./hello.txt&#34;) if err != nil { panic(err) } fmt.Println(string(s)) } å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ
âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ hello.txt â””â”€â”€ main.go 0 directories, 3 files âœ go build main.go âœ ./main Hello World! Hello go embed!"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "æ–‡ç«  ğŸ“",
      "item": "https://aimerneige.com/zh/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Golang embed",
      "item": "https://aimerneige.com/zh/post/go/go-embed/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Golang embed",
  "name": "Golang embed",
  "description": "å‰è¨€ åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸å¯é¿å…åœ°è¦å¤„ç†é™æ€æ–‡ä»¶ï¼Œå¦‚æœå°†æºç ç›´æ¥ä½œä¸ºè½¯ä»¶æä¾›é—®é¢˜ä¸å¤§ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„è¯»å–è¿™äº›é™æ€æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æœé¡¹ç›®ä½œä¸ºåº“å‘å¤–å…¬å¸ƒæ˜¾ç„¶ä¸å¯è¡Œï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯è¯»å–ä¸åˆ°æ–‡ä»¶çš„ï¼Œè€Œä½¿ç”¨ç»å¯¹è·¯å¾„å´ä¼šå¸¦æ¥æ›´å¤§çš„é—®é¢˜ï¼šå› ä¸ºä¸åŒçš„äººä½¿ç”¨ï¼Œè·¯å¾„ç»å¯¹ä¸å¯èƒ½å®Œå…¨ä¸€è‡´çš„ã€‚å¦‚æœè¦æ±‚ç”¨æˆ·åœ¨æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®è¿™äº›ä¾èµ–çš„é™æ€æ–‡ä»¶ï¼Œè™½ç„¶å¯è¡Œä½†æ˜¯ä¼šç»™ç”¨æˆ·å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œè€Œä¸”è¿™æ ·çš„å®ç°æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿä¼˜é›…ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›é™æ€æ–‡ä»¶ä¸€èµ·æ‰“åŒ…è¿›å¯æ‰§è¡Œæ–‡ä»¶ä¼¼ä¹æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç¡¬ç¼–ç ï¼Œå°†é™æ€æ–‡ä»¶ä»¥æ–‡æœ¬æˆ–å­—èŠ‚æ•°ç»„çš„å½¢å¼ç›´æ¥ç¼–å…¥æºä»£ç ï¼Œgo ä¹Ÿæœ‰ä¸€äº›åº“å¸®ä½ è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œæ¯”å¦‚ go-bindataã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåº“å·²ç»ç»ˆæ­¢ç»´æŠ¤äº†ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ go 1.16 ç‰ˆæœ¬ï¼Œå®˜æ–¹å‘å¸ƒäº† embed å®Œç¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡ç®€è¦ä»‹ç» embed çš„ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚\nembed å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ hello.txt\nHello World! Hello go embed! æˆ‘ä»¬è¦å†™ä¸€ä¸ªç¨‹åºè¯»å–å…¶ä¸­çš„å†…å®¹å¹¶è¾“å‡ºåˆ°ç»ˆç«¯ï¼š\n// file: main.go package main import ( \u0026#34;fmt\u0026#34; \u0026#34;os\u0026#34; ) func main() { s, err := os.ReadFile(\u0026#34;./hello.txt\u0026#34;) if err != nil { panic(err) } fmt.Println(string(s)) } å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ\nâœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ hello.txt â””â”€â”€ main.go 0 directories, 3 files âœ go build main.go âœ ./main Hello World! Hello go embed!",
  "keywords": [
    "golang", "embed"
  ],
  "articleBody": "å‰è¨€ åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸å¯é¿å…åœ°è¦å¤„ç†é™æ€æ–‡ä»¶ï¼Œå¦‚æœå°†æºç ç›´æ¥ä½œä¸ºè½¯ä»¶æä¾›é—®é¢˜ä¸å¤§ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„è¯»å–è¿™äº›é™æ€æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æœé¡¹ç›®ä½œä¸ºåº“å‘å¤–å…¬å¸ƒæ˜¾ç„¶ä¸å¯è¡Œï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯è¯»å–ä¸åˆ°æ–‡ä»¶çš„ï¼Œè€Œä½¿ç”¨ç»å¯¹è·¯å¾„å´ä¼šå¸¦æ¥æ›´å¤§çš„é—®é¢˜ï¼šå› ä¸ºä¸åŒçš„äººä½¿ç”¨ï¼Œè·¯å¾„ç»å¯¹ä¸å¯èƒ½å®Œå…¨ä¸€è‡´çš„ã€‚å¦‚æœè¦æ±‚ç”¨æˆ·åœ¨æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®è¿™äº›ä¾èµ–çš„é™æ€æ–‡ä»¶ï¼Œè™½ç„¶å¯è¡Œä½†æ˜¯ä¼šç»™ç”¨æˆ·å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œè€Œä¸”è¿™æ ·çš„å®ç°æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿä¼˜é›…ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›é™æ€æ–‡ä»¶ä¸€èµ·æ‰“åŒ…è¿›å¯æ‰§è¡Œæ–‡ä»¶ä¼¼ä¹æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç¡¬ç¼–ç ï¼Œå°†é™æ€æ–‡ä»¶ä»¥æ–‡æœ¬æˆ–å­—èŠ‚æ•°ç»„çš„å½¢å¼ç›´æ¥ç¼–å…¥æºä»£ç ï¼Œgo ä¹Ÿæœ‰ä¸€äº›åº“å¸®ä½ è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œæ¯”å¦‚ go-bindataã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåº“å·²ç»ç»ˆæ­¢ç»´æŠ¤äº†ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ go 1.16 ç‰ˆæœ¬ï¼Œå®˜æ–¹å‘å¸ƒäº† embed å®Œç¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡ç®€è¦ä»‹ç» embed çš„ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚\nembed å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ hello.txt\nHello World! Hello go embed! æˆ‘ä»¬è¦å†™ä¸€ä¸ªç¨‹åºè¯»å–å…¶ä¸­çš„å†…å®¹å¹¶è¾“å‡ºåˆ°ç»ˆç«¯ï¼š\n// file: main.go package main import ( \"fmt\" \"os\" ) func main() { s, err := os.ReadFile(\"./hello.txt\") if err != nil { panic(err) } fmt.Println(string(s)) } å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ\nâœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ hello.txt â””â”€â”€ main.go 0 directories, 3 files âœ go build main.go âœ ./main Hello World! Hello go embed! ä½†æ˜¯å¦‚æœ hello.txt è¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨çš„è¯ï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡Œç¨‹åºï¼š\nâœ rm hello.txt âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ main â””â”€â”€ main.go 0 directories, 3 files âœ ./main panic: open ./hello.txt: no such file or directory goroutine 1 [running]: main.main() /home/aimerneige/Code/go/go-embed-tutorial/main.go:11 +0x96 exit status 2 æ˜¾ç„¶ï¼Œå› ä¸ºè¯»å–ä¸åˆ°æ–‡ä»¶ï¼Œç¨‹åºåœ¨ç¬¬ 11 è¡Œ panic äº†ã€‚é‚£ä¹ˆå¦‚ä½•å°† hello.txt ä¹Ÿä¸€å¹¶æ‰“åŒ…å…¥å¯æ‰§è¡Œæ–‡ä»¶å‘¢ï¼Ÿ\næˆ‘ä»¬å…ˆä¸ä½¿ç”¨ embedï¼Œè€Œæ˜¯ç›´æ¥å°†æ–‡ä»¶å†…å®¹ç¡¬ç¼–ç ï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°è¿™æ ·çš„ä»£ç ï¼š\n// file: main.go package main import ( \"fmt\" ) var f string = `Hello World! Hello go embed!` func main() { fmt.Println(f) } æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š\nâœ go build main.go âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ main â””â”€â”€ main.go 0 directories, 3 files âœ ./main Hello World! Hello go embed! è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå­—ç¬¦ä¸² f æ¥å­˜å‚¨æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚ä½†æ˜¯ç›´æ¥å°†æ–‡æœ¬å†…å®¹æ”¾å…¥æºä»£ç ååˆ†ä¸ä¼˜é›…ï¼Œå°¤å…¶æ˜¯å½“æ–‡æœ¬æ–‡ä»¶å†…å®¹è¾ƒå¤šçš„æ—¶å€™ï¼Œæºä»£ç å°±ä¼šå¤ªæ··ä¹±ï¼Œæ”¹åŠ¨ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢å¤æ–‡ä»¶ hello.txt åä½¿ç”¨ embed æ¥ä¼˜åŒ–å®ƒï¼š\n// file: main.go package main import ( _ \"embed\" \"fmt\" ) //go:embed hello.txt var f string func main() { fmt.Println(f) } é¦–å…ˆï¼Œæˆ‘ä»¬ä¸‹åˆ’çº¿å¼•å…¥äº†ä¸€ä¸ªåŒ… _ã€€\"embed\"ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†å¼•å…¥ embed åŒ…æ¥æ‰§è¡Œå®ƒçš„ init å‡½æ•°è€Œä¸ä½¿ç”¨å®ƒã€‚æœ‰äº†è¿™ä¸ªåŒ…ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»¥æ³¨é‡Šçš„æ–¹å¼æ¥å°†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸Šï¼š\n//go:embed hello.txt var f string è¿™ä¸ªå˜é‡å°±ä¼šä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨æ–‡ä»¶ hello.txt ä¸­çš„æ•°æ®ã€‚\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ hello.txt æ–‡ä»¶å­˜åœ¨çš„æƒ…å†µä¸‹ç¼–è¯‘ç¨‹åºï¼š\nâœ go build main.go âœ ./main Hello World! Hello go embed! ç®€å•æ‰§è¡Œæ–‡ä»¶æˆ‘ä»¬å½“ç„¶å¯ä»¥å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆ é™¤ hello.txt ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\nâœ rm hello.txt âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ main â””â”€â”€ main.go 0 directories, 3 files âœ ./main Hello World! Hello go embed! æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œæˆ‘ä»¬ä¾ç„¶å¾—åˆ°äº†ç›¸åŒçš„è¾“å‡ºï¼Œè¿™æ˜¯å› ä¸º hello.txt ä¸­çš„å†…å®¹å·²ç»ç¼–ç åˆ°äº†å¯æ‰§è¡Œæ–‡ä»¶ä¸­äº†ã€‚\nç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†å›¾ç‰‡ç¼–ç ä¸ºå­—èŠ‚æ•°ç»„ï¼š\n// file: main.go package main import ( \"bytes\" _ \"embed\" \"image/jpeg\" \"image/png\" \"os\" ) //go:embed avatar.jpg var imgData []byte func main() { img, err := jpeg.Decode(bytes.NewReader(imgData)) if err != nil { panic(err) } f, err := os.Create(\"./avatar.png\") if err != nil { panic(err) } defer f.Close() png.Encode(f, img) } âœ tree . . â”œâ”€â”€ avatar.jpg â”œâ”€â”€ go.mod â””â”€â”€ main.go 0 directories, 3 files æ­¤æ—¶ï¼Œæˆ‘ä»¬ç¼–è¯‘ main.goï¼Œå¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹æ‰§è¡Œï¼Œå¹¶ä¸”éƒ½ä¼šåœ¨åŒçº§ç›®å½•ä¸‹è¾“å‡ºä¸€ä¸ª avatar.pngã€‚\nâœ go build main.go âœ rm avatar.jpg âœ ./main âœ tree . . â”œâ”€â”€ avatar.png â”œâ”€â”€ go.mod â”œâ”€â”€ main â””â”€â”€ main.go 0 directories, 4 files æ³¨æ„ embed çš„è·¯å¾„æ˜¯ç›¸å¯¹äºæºä»£ç æ–‡ä»¶è€Œè¨€çš„ã€‚å¦‚ä¸‹ä¾‹ï¼š\nâœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ hello.txt â”œâ”€â”€ internal â”‚ â”œâ”€â”€ asserts â”‚ â”‚ â””â”€â”€ example.png â”‚ â”œâ”€â”€ internal.go â”‚ â””â”€â”€ internal.txt â””â”€â”€ main.go 2 directories, 6 files // file: internal/internal.go package internal import ( _ \"embed\" ) //go:embed internal.txt var txt string //go:embed asserts/example.png var png []byte åœ¨ internal åŒ…ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨çš„ä¿©ä¸ªæ–‡ä»¶ internal/internal.txt å’Œ internal/asserts/example.png çš„è·¯å¾„ä¸æ˜¯é¡¹ç›®çš„ç›¸å¯¹è·¯å¾„ï¼Œè€Œæ˜¯æºæ–‡ä»¶ internal/internal.go çš„ç›¸å¯¹è·¯å¾„ã€‚\nä¸Šé¢çš„å†™æ³•å·²ç»èƒ½å¤Ÿè¦†ç›–å¤§éƒ¨åˆ†çš„åœºæ™¯äº†ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶å¾ˆå¤šè¦æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ embed.FSã€‚embed.FS å¯ä»¥å°†æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ‰“åŒ…å…¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶æŠ½è±¡ä¸º FS ä»¥ä¾›è°ƒç”¨ï¼š\n// file: main.go package main import ( \"bytes\" \"embed\" \"fmt\" \"image/png\" \"io/fs\" ) //go:embed resources/images var images embed.FS //go:embed resources/text var texts embed.FS //go:embed resources var resources embed.FS func main() { // read images \tfor i := 1; i  5; i++ { filePath := fmt.Sprintf(\"resources/images/Screenshot-%d.png\", i) imgFile, err := fs.ReadFile(images, filePath) if err != nil { panic(err) } image, err := png.Decode(bytes.NewReader(imgFile)) if err != nil { panic(err) } fmt.Printf(\"size of %s: %dx%d\\n\", filePath, image.Bounds().Dx(), image.Bounds().Dy()) } // read text \tfor i := 1; i  2; i++ { filePath := fmt.Sprintf(\"resources/text/example%d.txt\", i) example, err := texts.ReadFile(filePath) if err != nil { panic(err) } fmt.Printf(\"text of %s: %s\\n\", filePath, string(example)) } // read sub dir file \tlicense, err := resources.ReadFile(\"resources/license/LICENSE\") if err != nil { panic(err) } fmt.Println(string(license)) } âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ main.go â””â”€â”€ resources â”œâ”€â”€ images â”‚Â â”œâ”€â”€ Screenshot-1.png â”‚Â â”œâ”€â”€ Screenshot-2.png â”‚Â â”œâ”€â”€ Screenshot-3.png â”‚Â â”œâ”€â”€ Screenshot-4.png â”‚Â â””â”€â”€ Screenshot-5.png â”œâ”€â”€ license â”‚Â â””â”€â”€ LICENSE â””â”€â”€ text â”œâ”€â”€ example1.txt â””â”€â”€ example2.txt 4 directories, 10 files âœ cat resources/license/LICENSE EXAMPLE LICENSE FILE âœ cat resources/text/example1.txt example 1 âœ cat resources/text/example2.txt example 2 âœ go build main.go âœ ./main size of resources/images/Screenshot-1.png: 1920x1080 size of resources/images/Screenshot-2.png: 1920x1080 size of resources/images/Screenshot-3.png: 1920x1080 size of resources/images/Screenshot-4.png: 1920x1080 size of resources/images/Screenshot-5.png: 1920x1080 text of resources/text/example1.txt: example 1 text of resources/text/example2.txt: example 2 EXAMPLE LICENSE FILE âœ rm resources -rf âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ main â””â”€â”€ main.go 0 directories, 3 files âœ ./main size of resources/images/Screenshot-1.png: 1920x1080 size of resources/images/Screenshot-2.png: 1920x1080 size of resources/images/Screenshot-3.png: 1920x1080 size of resources/images/Screenshot-4.png: 1920x1080 size of resources/images/Screenshot-5.png: 1920x1080 text of resources/text/example1.txt: example 1 text of resources/text/example2.txt: example 2 EXAMPLE LICENSE FILE è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¯»å–æ–‡ä»¶æ—¶æä¾›çš„è·¯å¾„ä¸€å®šæ˜¯å®Œæ•´çš„ç›¸å¯¹è·¯å¾„ã€‚\nembed.FS åœ¨ http é™æ€æœåŠ¡ä¸­éå¸¸æœ‰ç”¨ï¼š\nmain.go\n// file: main.go package main import ( \"embed\" \"fmt\" \"io/fs\" \"net/http\" ) //go:embed public var public embed.FS func main() { mux := http.NewServeMux() mux.Handle(\"/\", handler()) http.ListenAndServe(\":8080\", mux) } func handler() http.Handler { f := fs.FS(public) html, err := fs.Sub(f, \"public\") if err != nil { panic(err) } fmt.Println(\"Server start at http://127.0.0.1:8080/\") return http.FileServer(http.FS(html)) } index.html\n html lang=\"en\" head meta charset=\"UTF-8\" titleHello Worldtitle head body h1Hello Worldh1 pThis is a simple example index.htmlp pClick About bellow to see about page.p a href=\"./about.html\"Abouta body html about.html\n html lang=\"en\" head meta charset=\"UTF-8\" titleAbouttitle head body h1Abouth1 pThis is a simple about.html page.p pClick bellow Index to back to index page.p a href=\"./index.html\"Indexa body html âœ tree . . â”œâ”€â”€ go.mod â”œâ”€â”€ main.go â””â”€â”€ public â”œâ”€â”€ about.html â””â”€â”€ index.html 1 directory, 4 files å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–ç¥å¥‡ç©æ³•ï¼Œè¿™é‡Œåªä»‹ç»æœ€åŸºæœ¬çš„ç”¨æ³•ï¼Œå…¶ä»–å¤§å®¶å‘æŒ¥æƒ³è±¡åŠ›ã€‚\nå‚è€ƒé“¾æ¥  embed  ",
  "wordCount" : "837",
  "inLanguage": "zh",
  "image":"https://aimerneige.com/images/go-embed.webp","datePublished": "2022-08-13T23:57:11+08:00",
  "dateModified": "2022-08-13T23:57:11+08:00",
  "author":{
    "@type": "Person",
    "name": "Aimer Neige"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://aimerneige.com/zh/post/go/go-embed/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "AimerNeige's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://aimerneige.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://aimerneige.com/zh/" accesskey="h" title="AimerNeige&#39;s Blog (Alt + H)">AimerNeige&#39;s Blog</a>
            <div class="logo-switches">
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://aimerneige.com/en/" title="English"
                            aria-label="English">English</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://aimerneige.com/zh/about/" title="å…³äº">
                    <span>å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/post/" title="æ–‡ç« ">
                    <span>æ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/archives/" title="å½’æ¡£">
                    <span>å½’æ¡£</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/tags/" title="æ ‡ç­¾">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/categories/" title="åˆ†ç±»">
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://aimerneige.com/zh/search/" title="æœç´¢">
                    <span>æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://aimerneige.com/zh/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://aimerneige.com/zh/post/">æ–‡ç«  ğŸ“</a></div>
    <h1 class="post-title">
      Golang embed
    </h1>
    <div class="post-meta"><span title='2022-08-13 23:57:11 +0800 CST'>å…«æœˆ 13, 2022</span>&nbsp;Â·&nbsp;Aimer Neige&nbsp;|&nbsp;<a href="https://github.com/aimerneige/blog/edit/master/content/post/Go/go-embed.zh.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://aimerneige.com/images/go-embed.webp" alt="Golang embed">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%89%8d%e8%a8%80" aria-label="å‰è¨€">å‰è¨€</a></li>
                <li>
                    <a href="#embed" aria-label="embed">embed</a></li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" aria-label="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="å‰è¨€">å‰è¨€<a hidden class="anchor" aria-hidden="true" href="#å‰è¨€">#</a></h1>
<p>åœ¨å†™é¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸å¯é¿å…åœ°è¦å¤„ç†é™æ€æ–‡ä»¶ï¼Œå¦‚æœå°†æºç ç›´æ¥ä½œä¸ºè½¯ä»¶æä¾›é—®é¢˜ä¸å¤§ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„è¯»å–è¿™äº›é™æ€æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æœé¡¹ç›®ä½œä¸ºåº“å‘å¤–å…¬å¸ƒæ˜¾ç„¶ä¸å¯è¡Œï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯è¯»å–ä¸åˆ°æ–‡ä»¶çš„ï¼Œè€Œä½¿ç”¨ç»å¯¹è·¯å¾„å´ä¼šå¸¦æ¥æ›´å¤§çš„é—®é¢˜ï¼šå› ä¸ºä¸åŒçš„äººä½¿ç”¨ï¼Œè·¯å¾„ç»å¯¹ä¸å¯èƒ½å®Œå…¨ä¸€è‡´çš„ã€‚å¦‚æœè¦æ±‚ç”¨æˆ·åœ¨æŒ‡å®šè·¯å¾„ä¸‹æ”¾ç½®è¿™äº›ä¾èµ–çš„é™æ€æ–‡ä»¶ï¼Œè™½ç„¶å¯è¡Œä½†æ˜¯ä¼šç»™ç”¨æˆ·å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œè€Œä¸”è¿™æ ·çš„å®ç°æ–¹å¼æ˜¾ç„¶ä¸å¤Ÿä¼˜é›…ã€‚è¿™æ—¶å€™ï¼Œå°†è¿™äº›é™æ€æ–‡ä»¶ä¸€èµ·æ‰“åŒ…è¿›å¯æ‰§è¡Œæ–‡ä»¶ä¼¼ä¹æ˜¯ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç¡¬ç¼–ç ï¼Œå°†é™æ€æ–‡ä»¶ä»¥æ–‡æœ¬æˆ–å­—èŠ‚æ•°ç»„çš„å½¢å¼ç›´æ¥ç¼–å…¥æºä»£ç ï¼Œgo ä¹Ÿæœ‰ä¸€äº›åº“å¸®ä½ è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œæ¯”å¦‚ <a href="https://github.com/jteeuwen/go-bindata">go-bindata</a>ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªåº“å·²ç»ç»ˆæ­¢ç»´æŠ¤äº†ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ go 1.16 ç‰ˆæœ¬ï¼Œå®˜æ–¹å‘å¸ƒäº† <a href="https://pkg.go.dev/embed">embed</a> å®Œç¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡ç®€è¦ä»‹ç» embed çš„ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚</p>
<h1 id="embed">embed<a hidden class="anchor" aria-hidden="true" href="#embed">#</a></h1>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>hello.txt</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">Hello World!
Hello go embed!
</code></pre></div><p>æˆ‘ä»¬è¦å†™ä¸€ä¸ªç¨‹åºè¯»å–å…¶ä¸­çš„å†…å®¹å¹¶è¾“å‡ºåˆ°ç»ˆç«¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// file: main.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;os&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;./hello.txt&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(string(<span style="color:#a6e22e">s</span>))
}
</code></pre></div><p>å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ tree .
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ hello.txt
â””â”€â”€ main.go

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">3</span> files

âœ go build main.go

âœ ./main                             
Hello World!
Hello go embed!
</code></pre></div><p>ä½†æ˜¯å¦‚æœ <code>hello.txt</code> è¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨çš„è¯ï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡Œç¨‹åºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ rm hello.txt

âœ tree .
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ main
â””â”€â”€ main.go

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">3</span> files

âœ ./main  
panic: open ./hello.txt: no such file or directory

goroutine <span style="color:#ae81ff">1</span> <span style="color:#f92672">[</span>running<span style="color:#f92672">]</span>:
main.main<span style="color:#f92672">()</span>
	/home/aimerneige/Code/go/go-embed-tutorial/main.go:11 +0x96
exit status <span style="color:#ae81ff">2</span>
</code></pre></div><p>æ˜¾ç„¶ï¼Œå› ä¸ºè¯»å–ä¸åˆ°æ–‡ä»¶ï¼Œç¨‹åºåœ¨ç¬¬ 11 è¡Œ panic äº†ã€‚é‚£ä¹ˆå¦‚ä½•å°† <code>hello.txt</code> ä¹Ÿä¸€å¹¶æ‰“åŒ…å…¥å¯æ‰§è¡Œæ–‡ä»¶å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆä¸ä½¿ç”¨ embedï¼Œè€Œæ˜¯ç›´æ¥å°†æ–‡ä»¶å†…å®¹ç¡¬ç¼–ç ï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°è¿™æ ·çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// file: main.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">string</span> = <span style="color:#e6db74">`Hello World!
</span><span style="color:#e6db74">Hello go embed!`</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">f</span>)
}
</code></pre></div><p>æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ go build main.go

âœ tree .
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ main
â””â”€â”€ main.go

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">3</span> files

âœ ./main 
Hello World!
Hello go embed!
</code></pre></div><p>è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå­—ç¬¦ä¸² <code>f</code> æ¥å­˜å‚¨æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚ä½†æ˜¯ç›´æ¥å°†æ–‡æœ¬å†…å®¹æ”¾å…¥æºä»£ç ååˆ†ä¸ä¼˜é›…ï¼Œå°¤å…¶æ˜¯å½“æ–‡æœ¬æ–‡ä»¶å†…å®¹è¾ƒå¤šçš„æ—¶å€™ï¼Œæºä»£ç å°±ä¼šå¤ªæ··ä¹±ï¼Œæ”¹åŠ¨ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢å¤æ–‡ä»¶ <code>hello.txt</code> åä½¿ç”¨ embed æ¥ä¼˜åŒ–å®ƒï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// file: main.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#a6e22e">_</span> <span style="color:#e6db74">&#34;embed&#34;</span>
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#75715e">//go:embed hello.txt
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">string</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">f</span>)
}
</code></pre></div><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸‹åˆ’çº¿å¼•å…¥äº†ä¸€ä¸ªåŒ… <code>_ã€€&quot;embed&quot;</code>ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†å¼•å…¥ <code>embed</code> åŒ…æ¥æ‰§è¡Œå®ƒçš„ <code>init</code> å‡½æ•°è€Œä¸ä½¿ç”¨å®ƒã€‚æœ‰äº†è¿™ä¸ªåŒ…ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»¥æ³¨é‡Šçš„æ–¹å¼æ¥å°†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸Šï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">//go:embed hello.txt
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">string</span>
</code></pre></div><p>è¿™ä¸ªå˜é‡å°±ä¼šä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨æ–‡ä»¶ <code>hello.txt</code> ä¸­çš„æ•°æ®ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ <code>hello.txt</code> æ–‡ä»¶å­˜åœ¨çš„æƒ…å†µä¸‹ç¼–è¯‘ç¨‹åºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ go build main.go

âœ ./main 
Hello World!
Hello go embed!
</code></pre></div><p>ç®€å•æ‰§è¡Œæ–‡ä»¶æˆ‘ä»¬å½“ç„¶å¯ä»¥å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆ é™¤ <code>hello.txt</code> ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ rm hello.txt

âœ tree .
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ main
â””â”€â”€ main.go

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">3</span> files

âœ ./main 
Hello World!
Hello go embed!
</code></pre></div><p>æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œæˆ‘ä»¬ä¾ç„¶å¾—åˆ°äº†ç›¸åŒçš„è¾“å‡ºï¼Œè¿™æ˜¯å› ä¸º <code>hello.txt</code> ä¸­çš„å†…å®¹å·²ç»ç¼–ç åˆ°äº†å¯æ‰§è¡Œæ–‡ä»¶ä¸­äº†ã€‚</p>
<p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†å›¾ç‰‡ç¼–ç ä¸ºå­—èŠ‚æ•°ç»„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// file: main.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;bytes&#34;</span>
	<span style="color:#a6e22e">_</span> <span style="color:#e6db74">&#34;embed&#34;</span>
	<span style="color:#e6db74">&#34;image/jpeg&#34;</span>
	<span style="color:#e6db74">&#34;image/png&#34;</span>
	<span style="color:#e6db74">&#34;os&#34;</span>
)

<span style="color:#75715e">//go:embed avatar.jpg
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">imgData</span> []<span style="color:#66d9ef">byte</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">img</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">jpeg</span>.<span style="color:#a6e22e">Decode</span>(<span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">NewReader</span>(<span style="color:#a6e22e">imgData</span>))
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Create</span>(<span style="color:#e6db74">&#34;./avatar.png&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Close</span>()
	<span style="color:#a6e22e">png</span>.<span style="color:#a6e22e">Encode</span>(<span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">img</span>)
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ tree .
.
â”œâ”€â”€ avatar.jpg
â”œâ”€â”€ go.mod
â””â”€â”€ main.go

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">3</span> files
</code></pre></div><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬ç¼–è¯‘ <code>main.go</code>ï¼Œå¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹æ‰§è¡Œï¼Œå¹¶ä¸”éƒ½ä¼šåœ¨åŒçº§ç›®å½•ä¸‹è¾“å‡ºä¸€ä¸ª <code>avatar.png</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ go build main.go

âœ rm avatar.jpg

âœ ./main

âœ tree .
.
â”œâ”€â”€ avatar.png
â”œâ”€â”€ go.mod
â”œâ”€â”€ main
â””â”€â”€ main.go

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">4</span> files
</code></pre></div><p>æ³¨æ„ embed çš„è·¯å¾„æ˜¯ç›¸å¯¹äºæºä»£ç æ–‡ä»¶è€Œè¨€çš„ã€‚å¦‚ä¸‹ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ tree . 
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ hello.txt
â”œâ”€â”€ internal
â”‚   â”œâ”€â”€ asserts
â”‚   â”‚   â””â”€â”€ example.png
â”‚   â”œâ”€â”€ internal.go
â”‚   â””â”€â”€ internal.txt
â””â”€â”€ main.go

<span style="color:#ae81ff">2</span> directories, <span style="color:#ae81ff">6</span> files
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// file: internal/internal.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">internal</span>

<span style="color:#f92672">import</span> (
	<span style="color:#a6e22e">_</span> <span style="color:#e6db74">&#34;embed&#34;</span>
)

<span style="color:#75715e">//go:embed internal.txt
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">txt</span> <span style="color:#66d9ef">string</span>

<span style="color:#75715e">//go:embed asserts/example.png
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">png</span> []<span style="color:#66d9ef">byte</span>
</code></pre></div><p>åœ¨ <code>internal</code> åŒ…ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨çš„ä¿©ä¸ªæ–‡ä»¶ <code>internal/internal.txt</code> å’Œ <code>internal/asserts/example.png</code> çš„è·¯å¾„ä¸æ˜¯é¡¹ç›®çš„ç›¸å¯¹è·¯å¾„ï¼Œè€Œæ˜¯æºæ–‡ä»¶ <code>internal/internal.go</code> çš„ç›¸å¯¹è·¯å¾„ã€‚</p>
<p>ä¸Šé¢çš„å†™æ³•å·²ç»èƒ½å¤Ÿè¦†ç›–å¤§éƒ¨åˆ†çš„åœºæ™¯äº†ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶å¾ˆå¤šè¦æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ <code>embed.FS</code>ã€‚<code>embed.FS</code> å¯ä»¥å°†æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ‰“åŒ…å…¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶æŠ½è±¡ä¸º <code>FS</code> ä»¥ä¾›è°ƒç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// file: main.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;bytes&#34;</span>
	<span style="color:#e6db74">&#34;embed&#34;</span>
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;image/png&#34;</span>
	<span style="color:#e6db74">&#34;io/fs&#34;</span>
)

<span style="color:#75715e">//go:embed resources/images
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">images</span> <span style="color:#a6e22e">embed</span>.<span style="color:#a6e22e">FS</span>

<span style="color:#75715e">//go:embed resources/text
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">texts</span> <span style="color:#a6e22e">embed</span>.<span style="color:#a6e22e">FS</span>

<span style="color:#75715e">//go:embed resources
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">resources</span> <span style="color:#a6e22e">embed</span>.<span style="color:#a6e22e">FS</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// read images
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">5</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">filePath</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;resources/images/Screenshot-%d.png&#34;</span>, <span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">imgFile</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#a6e22e">images</span>, <span style="color:#a6e22e">filePath</span>)
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			panic(<span style="color:#a6e22e">err</span>)
		}
		<span style="color:#a6e22e">image</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">png</span>.<span style="color:#a6e22e">Decode</span>(<span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">NewReader</span>(<span style="color:#a6e22e">imgFile</span>))
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			panic(<span style="color:#a6e22e">err</span>)
		}
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;size of %s: %dx%d\n&#34;</span>, <span style="color:#a6e22e">filePath</span>, <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Bounds</span>().<span style="color:#a6e22e">Dx</span>(), <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Bounds</span>().<span style="color:#a6e22e">Dy</span>())
	}
	<span style="color:#75715e">// read text
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">2</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">filePath</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;resources/text/example%d.txt&#34;</span>, <span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">example</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">texts</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#a6e22e">filePath</span>)
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			panic(<span style="color:#a6e22e">err</span>)
		}
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;text of %s: %s\n&#34;</span>, <span style="color:#a6e22e">filePath</span>, string(<span style="color:#a6e22e">example</span>))
	}
	<span style="color:#75715e">// read sub dir file
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">license</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;resources/license/LICENSE&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(string(<span style="color:#a6e22e">license</span>))
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ tree .            
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ main.go
â””â”€â”€ resources
    â”œâ”€â”€ images
    â”‚Â Â  â”œâ”€â”€ Screenshot-1.png
    â”‚Â Â  â”œâ”€â”€ Screenshot-2.png
    â”‚Â Â  â”œâ”€â”€ Screenshot-3.png
    â”‚Â Â  â”œâ”€â”€ Screenshot-4.png
    â”‚Â Â  â””â”€â”€ Screenshot-5.png
    â”œâ”€â”€ license
    â”‚Â Â  â””â”€â”€ LICENSE
    â””â”€â”€ text
        â”œâ”€â”€ example1.txt
        â””â”€â”€ example2.txt

<span style="color:#ae81ff">4</span> directories, <span style="color:#ae81ff">10</span> files

âœ cat resources/license/LICENSE  
EXAMPLE LICENSE FILE

âœ cat resources/text/example1.txt 
example <span style="color:#ae81ff">1</span>

âœ cat resources/text/example2.txt
example <span style="color:#ae81ff">2</span>

âœ go build main.go 

âœ ./main 
size of resources/images/Screenshot-1.png: 1920x1080
size of resources/images/Screenshot-2.png: 1920x1080
size of resources/images/Screenshot-3.png: 1920x1080
size of resources/images/Screenshot-4.png: 1920x1080
size of resources/images/Screenshot-5.png: 1920x1080
text of resources/text/example1.txt: example <span style="color:#ae81ff">1</span>
text of resources/text/example2.txt: example <span style="color:#ae81ff">2</span>
EXAMPLE LICENSE FILE

âœ rm resources -rf

âœ tree .
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ main
â””â”€â”€ main.go

<span style="color:#ae81ff">0</span> directories, <span style="color:#ae81ff">3</span> files

âœ ./main 
size of resources/images/Screenshot-1.png: 1920x1080
size of resources/images/Screenshot-2.png: 1920x1080
size of resources/images/Screenshot-3.png: 1920x1080
size of resources/images/Screenshot-4.png: 1920x1080
size of resources/images/Screenshot-5.png: 1920x1080
text of resources/text/example1.txt: example <span style="color:#ae81ff">1</span>
text of resources/text/example2.txt: example <span style="color:#ae81ff">2</span>
EXAMPLE LICENSE FILE
</code></pre></div><p>è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¯»å–æ–‡ä»¶æ—¶æä¾›çš„è·¯å¾„ä¸€å®šæ˜¯å®Œæ•´çš„ç›¸å¯¹è·¯å¾„ã€‚</p>
<p><code>embed.FS</code> åœ¨ http é™æ€æœåŠ¡ä¸­éå¸¸æœ‰ç”¨ï¼š</p>
<p><code>main.go</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// file: main.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;embed&#34;</span>
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;io/fs&#34;</span>
	<span style="color:#e6db74">&#34;net/http&#34;</span>
)

<span style="color:#75715e">//go:embed public
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">public</span> <span style="color:#a6e22e">embed</span>.<span style="color:#a6e22e">FS</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">mux</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NewServeMux</span>()
	<span style="color:#a6e22e">mux</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">handler</span>())
	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#a6e22e">mux</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">handler</span>() <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Handler</span> {
	<span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">FS</span>(<span style="color:#a6e22e">public</span>)
	<span style="color:#a6e22e">html</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">Sub</span>(<span style="color:#a6e22e">f</span>, <span style="color:#e6db74">&#34;public&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Server start at http://127.0.0.1:8080/&#34;</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FileServer</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FS</span>(<span style="color:#a6e22e">html</span>))
}
</code></pre></div><p><code>index.html</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
&lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;Hello World&lt;/<span style="color:#f92672">title</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;
    &lt;<span style="color:#f92672">h1</span>&gt;Hello World&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;<span style="color:#f92672">p</span>&gt;This is a simple example index.html&lt;/<span style="color:#f92672">p</span>&gt;
    &lt;<span style="color:#f92672">p</span>&gt;Click About bellow to see about page.&lt;/<span style="color:#f92672">p</span>&gt;
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./about.html&#34;</span>&gt;About&lt;/<span style="color:#f92672">a</span>&gt;
&lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p><code>about.html</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
&lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;About&lt;/<span style="color:#f92672">title</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;
    &lt;<span style="color:#f92672">h1</span>&gt;About&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;<span style="color:#f92672">p</span>&gt;This is a simple about.html page.&lt;/<span style="color:#f92672">p</span>&gt;
    &lt;<span style="color:#f92672">p</span>&gt;Click bellow Index to back to index page.&lt;/<span style="color:#f92672">p</span>&gt;
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./index.html&#34;</span>&gt;Index&lt;/<span style="color:#f92672">a</span>&gt;
&lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">âœ tree .
.
â”œâ”€â”€ go.mod
â”œâ”€â”€ main.go
â””â”€â”€ public
    â”œâ”€â”€ about.html
    â””â”€â”€ index.html

<span style="color:#ae81ff">1</span> directory, <span style="color:#ae81ff">4</span> files
</code></pre></div><p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–ç¥å¥‡ç©æ³•ï¼Œè¿™é‡Œåªä»‹ç»æœ€åŸºæœ¬çš„ç”¨æ³•ï¼Œå…¶ä»–å¤§å®¶å‘æŒ¥æƒ³è±¡åŠ›ã€‚</p>
<h1 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥<a hidden class="anchor" aria-hidden="true" href="#å‚è€ƒé“¾æ¥">#</a></h1>
<ul>
<li><a href="https://pkg.go.dev/embed">embed</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://aimerneige.com/zh/tags/golang/">golang</a></li>
      <li><a href="https://aimerneige.com/zh/tags/embed/">embed</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://aimerneige.com/zh/post/linux/install-wechat-on-fedora/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>åœ¨ Fedora ç³»ç»Ÿä¸Šå®‰è£…å¾®ä¿¡</span>
  </a>
  <a class="next" href="https://aimerneige.com/zh/post/go/go-image-processing-basic/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>Go å›¾åƒå¤„ç†åŸºç¡€</span>
  </a>
</nav>

  </footer>
<div id="license">
    <p>
        This article is licensed under
        <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/" style="color: #00b5da">
            <u>CC-BY-NC-4.0</u>
        </a>
    </p>
</div>

<div id="comment">
    <script
        id="utterances"
        src="https://utteranc.es/client.js"
        repo="aimerneige/aimerneige.github.io"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async
    ></script>
    <script>
        
        let ua = navigator.userAgent.toLocaleLowerCase();
        if (ua.match(/QQ/i) == "qq") {
            document.getElementById("utterances").remove();
        }
        if (ua.match(/MicroMessenger/i) == "micromessenger") {
            document.getElementById("utterances").remove();
        }
    </script>
</div>




</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://aimerneige.com/zh/">AimerNeige&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
